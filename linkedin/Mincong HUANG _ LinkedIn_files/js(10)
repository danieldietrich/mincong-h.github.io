/*
	jQuery pub/sub plugin by Peter Higgins (dante@dojotoolkit.org)
	Loosely based on Dojo publish/subscribe API, limited in scope. Rewritten blindly.
	Original is (c) Dojo Foundation 2004-2009. Released under either AFL or new BSD, see:
	http://dojofoundation.org/license for more information.
*/
;(function(d){
	// the topic/subscription hash
	var cache = {};
	d.publish = function(/* String */topic, /* Array? */args){
		// summary: 
		//		Publish some data on a named topic.
		// topic: String
		//		The channel to publish on
		// args: Array?
		//		The data to publish. Each array item is converted into an ordered
		//		arguments on the subscribed functions. 
		//
		// example:
		//		Publish stuff on '/some/topic'. Anything subscribed will be called
		//		with a function signature like: function(a,b,c){ ... }
		//
		//	|		$.publish("/some/topic", ["a","b","c"]);
		d.each(cache[topic], function(){
			this.apply(d, args || []);
		});
	};
	d.subscribe = function(/* String */topic, /* Function */callback){
		// summary:
		//		Register a callback on a named topic.
		// topic: String
		//		The channel to subscribe to
		// callback: Function
		//		The handler event. Anytime something is $.publish'ed on a 
		//		subscribed channel, the callback will be called with the
		//		published array as ordered arguments.
		//
		// returns: Array
		//		A handle which can be used to unsubscribe this particular subscription.
		//	
		// example:
		//	|	$.subscribe("/some/topic", function(a, b, c){ /* handle data */ });
		//
		if(!cache[topic]){
			cache[topic] = [];
		}
		cache[topic].push(callback);
		return [topic, callback]; // Array
	};
	d.unsubscribe = function(/* Array */handle){
		// summary:
		//		Disconnect a subscribed function for a topic.
		// handle: Array
		//		The return value from a $.subscribe call.
		// example:
		//	|	var handle = $.subscribe("/something", function(){});
		//	|	$.unsubscribe(handle);

		var t = handle[0];
		cache[t] && d.each(cache[t], function(idx){
			if(this == handle[1]){
				cache[t].splice(idx, 1);
			}
		});
	};
})(jQuery);/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.8.1
*/
if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){
var A=YAHOO.util.Event,B=YAHOO.util.Dom;return{useShim:false,_shimActive:false,_shimState:false,_debugShim:false,_createShim:function(){var C=document.createElement("div");C.id="yui-ddm-shim";if(document.body.firstChild){document.body.insertBefore(C,document.body.firstChild);}else{document.body.appendChild(C);}C.style.display="none";C.style.backgroundColor="red";C.style.position="absolute";C.style.zIndex="99999";B.setStyle(C,"opacity","0");this._shim=C;A.on(C,"mouseup",this.handleMouseUp,this,true);A.on(C,"mousemove",this.handleMouseMove,this,true);A.on(window,"scroll",this._sizeShim,this,true);},_sizeShim:function(){if(this._shimActive){var C=this._shim;C.style.height=B.getDocumentHeight()+"px";C.style.width=B.getDocumentWidth()+"px";C.style.top="0";C.style.left="0";}},_activateShim:function(){if(this.useShim){if(!this._shim){this._createShim();}this._shimActive=true;var C=this._shim,D="0";if(this._debugShim){D=".5";}B.setStyle(C,"opacity",D);this._sizeShim();C.style.display="block";}},_deactivateShim:function(){this._shim.style.display="none";this._shimActive=false;},_shim:null,ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true;},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(E,D){for(var F in this.ids){for(var C in this.ids[F]){var G=this.ids[F][C];if(!this.isTypeOfDD(G)){continue;}G[E].apply(G,D);}}},_onLoad:function(){this.init();A.on(document,"mouseup",this.handleMouseUp,this,true);A.on(document,"mousemove",this.handleMouseMove,this,true);A.on(window,"unload",this._onUnload,this,true);A.on(window,"resize",this._onResize,this,true);},_onResize:function(C){this._execOnAll("resetConstraints",[]);},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(D,C){if(!this.initialized){this.init();}if(!this.ids[C]){this.ids[C]={};}this.ids[C][D.id]=D;},removeDDFromGroup:function(E,C){if(!this.ids[C]){this.ids[C]={};}var D=this.ids[C];if(D&&D[E.id]){delete D[E.id];}},_remove:function(E){for(var D in E.groups){if(D){var C=this.ids[D];if(C&&C[E.id]){delete C[E.id];}}}delete this.handleIds[E.id];},regHandle:function(D,C){if(!this.handleIds[D]){this.handleIds[D]={};}this.handleIds[D][C]=C;},isDragDrop:function(C){return(this.getDDById(C))?true:false;},getRelated:function(H,D){var G=[];for(var F in H.groups){for(var E in this.ids[F]){var C=this.ids[F][E];if(!this.isTypeOfDD(C)){continue;}if(!D||C.isTarget){G[G.length]=C;}}}return G;},isLegalTarget:function(G,F){var D=this.getRelated(G,true);for(var E=0,C=D.length;E<C;++E){if(D[E].id==F.id){return true;}}return false;},isTypeOfDD:function(C){return(C&&C.__ygDragDrop);},isHandle:function(D,C){return(this.handleIds[D]&&this.handleIds[D][C]);},getDDById:function(D){for(var C in this.ids){if(this.ids[C][D]){return this.ids[C][D];}}return null;},handleMouseDown:function(E,D){this.currentTarget=YAHOO.util.Event.getTarget(E);this.dragCurrent=D;var C=D.getEl();this.startX=YAHOO.util.Event.getPageX(E);this.startY=YAHOO.util.Event.getPageY(E);this.deltaX=this.startX-C.offsetLeft;this.deltaY=this.startY-C.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var F=YAHOO.util.DDM;F.startDrag(F.startX,F.startY);F.fromTimeout=true;},this.clickTimeThresh);},startDrag:function(C,E){if(this.dragCurrent&&this.dragCurrent.useShim){this._shimState=this.useShim;this.useShim=true;}this._activateShim();clearTimeout(this.clickTimeout);var D=this.dragCurrent;if(D&&D.events.b4StartDrag){D.b4StartDrag(C,E);D.fireEvent("b4StartDragEvent",{x:C,y:E});}if(D&&D.events.startDrag){D.startDrag(C,E);D.fireEvent("startDragEvent",{x:C,y:E});}this.dragThreshMet=true;},handleMouseUp:function(C){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout){this.fromTimeout=false;this.handleMouseMove(C);}this.fromTimeout=false;this.fireEvents(C,true);}else{}this.stopDrag(C);this.stopEvent(C);}},stopEvent:function(C){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(C);}if(this.preventDefault){YAHOO.util.Event.preventDefault(C);}},stopDrag:function(E,D){var C=this.dragCurrent;if(C&&!D){if(this.dragThreshMet){if(C.events.b4EndDrag){C.b4EndDrag(E);C.fireEvent("b4EndDragEvent",{e:E});}if(C.events.endDrag){C.endDrag(E);C.fireEvent("endDragEvent",{e:E});}}if(C.events.mouseUp){C.onMouseUp(E);C.fireEvent("mouseUpEvent",{e:E});}}if(this._shimActive){this._deactivateShim();if(this.dragCurrent&&this.dragCurrent.useShim){this.useShim=this._shimState;this._shimState=false;}}this.dragCurrent=null;this.dragOvers={};},handleMouseMove:function(F){var C=this.dragCurrent;if(C){if(YAHOO.env.ua.ie&&(YAHOO.env.ua.ie<9)&&!F.button){this.stopEvent(F);return this.handleMouseUp(F);}else{if(F.clientX<0||F.clientY<0){}}if(!this.dragThreshMet){var E=Math.abs(this.startX-YAHOO.util.Event.getPageX(F));var D=Math.abs(this.startY-YAHOO.util.Event.getPageY(F));if(E>this.clickPixelThresh||D>this.clickPixelThresh){this.startDrag(this.startX,this.startY);}}if(this.dragThreshMet){if(C&&C.events.b4Drag){C.b4Drag(F);C.fireEvent("b4DragEvent",{e:F});}if(C&&C.events.drag){C.onDrag(F);C.fireEvent("dragEvent",{e:F});}if(C){this.fireEvents(F,false);}}this.stopEvent(F);}},fireEvents:function(V,L){var a=this.dragCurrent;if(!a||a.isLocked()||a.dragOnly){return;}var N=YAHOO.util.Event.getPageX(V),M=YAHOO.util.Event.getPageY(V),P=new YAHOO.util.Point(N,M),K=a.getTargetCoord(P.x,P.y),F=a.getDragEl(),E=["out","over","drop","enter"],U=new YAHOO.util.Region(K.y,K.x+F.offsetWidth,K.y+F.offsetHeight,K.x),I=[],D={},Q=[],c={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var S in this.dragOvers){var d=this.dragOvers[S];if(!this.isTypeOfDD(d)){continue;
}if(!this.isOverTarget(P,d,this.mode,U)){c.outEvts.push(d);}I[S]=true;delete this.dragOvers[S];}for(var R in a.groups){if("string"!=typeof R){continue;}for(S in this.ids[R]){var G=this.ids[R][S];if(!this.isTypeOfDD(G)){continue;}if(G.isTarget&&!G.isLocked()&&G!=a){if(this.isOverTarget(P,G,this.mode,U)){D[R]=true;if(L){c.dropEvts.push(G);}else{if(!I[G.id]){c.enterEvts.push(G);}else{c.overEvts.push(G);}this.dragOvers[G.id]=G;}}}}}this.interactionInfo={out:c.outEvts,enter:c.enterEvts,over:c.overEvts,drop:c.dropEvts,point:P,draggedRegion:U,sourceRegion:this.locationCache[a.id],validDrop:L};for(var C in D){Q.push(C);}if(L&&!c.dropEvts.length){this.interactionInfo.validDrop=false;if(a.events.invalidDrop){a.onInvalidDrop(V);a.fireEvent("invalidDropEvent",{e:V});}}for(S=0;S<E.length;S++){var Y=null;if(c[E[S]+"Evts"]){Y=c[E[S]+"Evts"];}if(Y&&Y.length){var H=E[S].charAt(0).toUpperCase()+E[S].substr(1),X="onDrag"+H,J="b4Drag"+H,O="drag"+H+"Event",W="drag"+H;if(this.mode){if(a.events[J]){a[J](V,Y,Q);a.fireEvent(J+"Event",{event:V,info:Y,group:Q});}if(a.events[W]){a[X](V,Y,Q);a.fireEvent(O,{event:V,info:Y,group:Q});}}else{for(var Z=0,T=Y.length;Z<T;++Z){if(a.events[J]){a[J](V,Y[Z].id,Q[0]);a.fireEvent(J+"Event",{event:V,info:Y[Z].id,group:Q[0]});}if(a.events[W]){a[X](V,Y[Z].id,Q[0]);a.fireEvent(O,{event:V,info:Y[Z].id,group:Q[0]});}}}}}},getBestMatch:function(E){var G=null;var D=E.length;if(D==1){G=E[0];}else{for(var F=0;F<D;++F){var C=E[F];if(this.mode==this.INTERSECT&&C.cursorIsOver){G=C;break;}else{if(!G||!G.overlap||(C.overlap&&G.overlap.getArea()<C.overlap.getArea())){G=C;}}}}return G;},refreshCache:function(D){var F=D||this.ids;for(var C in F){if("string"!=typeof C){continue;}for(var E in this.ids[C]){var G=this.ids[C][E];if(this.isTypeOfDD(G)){var H=this.getLocation(G);if(H){this.locationCache[G.id]=H;}else{delete this.locationCache[G.id];}}}}},verifyEl:function(D){try{if(D){var C=D.offsetParent;if(C){return true;}}}catch(E){}return false;},getLocation:function(H){if(!this.isTypeOfDD(H)){return null;}var F=H.getEl(),K,E,D,M,L,N,C,J,G;try{K=YAHOO.util.Dom.getXY(F);}catch(I){}if(!K){return null;}E=K[0];D=E+F.offsetWidth;M=K[1];L=M+F.offsetHeight;N=M-H.padding[0];C=D+H.padding[1];J=L+H.padding[2];G=E-H.padding[3];return new YAHOO.util.Region(N,C,J,G);},isOverTarget:function(K,C,E,F){var G=this.locationCache[C.id];if(!G||!this.useCache){G=this.getLocation(C);this.locationCache[C.id]=G;}if(!G){return false;}C.cursorIsOver=G.contains(K);var J=this.dragCurrent;if(!J||(!E&&!J.constrainX&&!J.constrainY)){return C.cursorIsOver;}C.overlap=null;if(!F){var H=J.getTargetCoord(K.x,K.y);var D=J.getDragEl();F=new YAHOO.util.Region(H.y,H.x+D.offsetWidth,H.y+D.offsetHeight,H.x);}var I=F.intersect(G);if(I){C.overlap=I;return(E)?true:C.cursorIsOver;}else{return false;}},_onUnload:function(D,C){this.unregAll();},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null;}this._execOnAll("unreg",[]);this.ids={};},elementCache:{},getElWrapper:function(D){var C=this.elementCache[D];if(!C||!C.el){C=this.elementCache[D]=new this.ElementWrapper(YAHOO.util.Dom.get(D));}return C;},getElement:function(C){return YAHOO.util.Dom.get(C);},getCss:function(D){var C=YAHOO.util.Dom.get(D);return(C)?C.style:null;},ElementWrapper:function(C){this.el=C||null;this.id=this.el&&C.id;this.css=this.el&&C.style;},getPosX:function(C){return YAHOO.util.Dom.getX(C);},getPosY:function(C){return YAHOO.util.Dom.getY(C);},swapNode:function(E,C){if(E.swapNode){E.swapNode(C);}else{var F=C.parentNode;var D=C.nextSibling;if(D==E){F.insertBefore(E,C);}else{if(C==E.nextSibling){F.insertBefore(C,E);}else{E.parentNode.replaceChild(C,E);F.insertBefore(E,D);}}}},getScroll:function(){var E,C,F=document.documentElement,D=document.body;if(F&&(F.scrollTop||F.scrollLeft)){E=F.scrollTop;C=F.scrollLeft;}else{if(D){E=D.scrollTop;C=D.scrollLeft;}else{}}return{top:E,left:C};},getStyle:function(D,C){return YAHOO.util.Dom.getStyle(D,C);},getScrollTop:function(){return this.getScroll().top;},getScrollLeft:function(){return this.getScroll().left;},moveToEl:function(C,E){var D=YAHOO.util.Dom.getXY(E);YAHOO.util.Dom.setXY(C,D);},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight();},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth();},numericSort:function(D,C){return(D-C);},_timeoutCount:0,_addListeners:function(){var C=YAHOO.util.DDM;if(YAHOO.util.Event&&document){C._onLoad();}else{if(C._timeoutCount>2000){}else{setTimeout(C._addListeners,10);if(document&&document.body){C._timeoutCount+=1;}}}},handleWasClicked:function(C,E){if(this.isHandle(E,C.id)){return true;}else{var D=C.parentNode;while(D){if(this.isHandle(E,D.id)){return true;}else{D=D.parentNode;}}}return false;}};}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners();}(function(){var A=YAHOO.util.Event;var B=YAHOO.util.Dom;YAHOO.util.DragDrop=function(E,C,D){if(E){this.init(E,C,D);}};YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments);},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isTarget:true,padding:null,dragOnly:false,useShim:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(C,D){},startDrag:function(C,D){},b4Drag:function(C){},onDrag:function(C){},onDragEnter:function(C,D){},b4DragOver:function(C){},onDragOver:function(C,D){},b4DragOut:function(C){},onDragOut:function(C,D){},b4DragDrop:function(C){},onDragDrop:function(C,D){},onInvalidDrop:function(C){},b4EndDrag:function(C){},endDrag:function(C){},b4MouseDown:function(C){},onMouseDown:function(C){},onMouseUp:function(C){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=B.get(this.id);
}return this._domRef;},getDragEl:function(){return B.get(this.dragElId);},init:function(F,C,D){this.initTarget(F,C,D);A.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,true);for(var E in this.events){this.createEvent(E+"Event");}},initTarget:function(E,C,D){this.config=D||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof E!=="string"){this._domRef=E;E=B.generateId(E);}this.id=E;this.addToGroup((C)?C:"default");this.handleElId=E;A.onAvailable(E,this.handleOnAvailable,this,true);this.setDragElId(E);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();},applyConfig:function(){this.events={mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events){for(var C in this.config.events){if(this.config.events[C]===false){this.events[C]=false;}}}this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);this.dragOnly=((this.config.dragOnly===true)?true:false);this.useShim=((this.config.useShim===true)?true:false);},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable();},setPadding:function(E,C,F,D){if(!C&&0!==C){this.padding=[E,E,E,E];}else{if(!F&&0!==F){this.padding=[E,C,E,C];}else{this.padding=[E,C,F,D];}}},setInitPosition:function(F,E){var G=this.getEl();if(!this.DDM.verifyEl(G)){if(G&&G.style&&(G.style.display=="none")){}else{}return;}var D=F||0;var C=E||0;var H=B.getXY(G);this.initPageX=H[0]-D;this.initPageY=H[1]-C;this.lastPageX=H[0];this.lastPageY=H[1];this.setStartPosition(H);},setStartPosition:function(D){var C=D||B.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=C[0];this.startPageY=C[1];},addToGroup:function(C){this.groups[C]=true;this.DDM.regDragDrop(this,C);},removeFromGroup:function(C){if(this.groups[C]){delete this.groups[C];}this.DDM.removeDDFromGroup(this,C);},setDragElId:function(C){this.dragElId=C;},setHandleElId:function(C){if(typeof C!=="string"){C=B.generateId(C);}this.handleElId=C;this.DDM.regHandle(this.id,C);},setOuterHandleElId:function(C){if(typeof C!=="string"){C=B.generateId(C);}A.on(C,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(C);this.hasOuterHandles=true;},unreg:function(){A.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this);},isLocked:function(){return(this.DDM.isLocked()||this.locked);},handleMouseDown:function(J,I){var D=J.which||J.button;if(this.primaryButtonOnly&&D>1){return;}if(this.isLocked()){return;}var C=this.b4MouseDown(J),F=true;if(this.events.b4MouseDown){F=this.fireEvent("b4MouseDownEvent",J);}var E=this.onMouseDown(J),H=true;if(this.events.mouseDown){H=this.fireEvent("mouseDownEvent",J);}if((C===false)||(E===false)||(F===false)||(H===false)){return;}this.DDM.refreshCache(this.groups);var G=new YAHOO.util.Point(A.getPageX(J),A.getPageY(J));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(G,this)){}else{if(this.clickValidator(J)){this.setStartPosition();this.DDM.handleMouseDown(J,this);this.DDM.stopEvent(J);}else{}}},clickValidator:function(D){var C=YAHOO.util.Event.getTarget(D);return(this.isValidHandleChild(C)&&(this.id==this.handleElId||this.DDM.handleWasClicked(C,this.id)));},getTargetCoord:function(E,D){var C=E-this.deltaX;var F=D-this.deltaY;if(this.constrainX){if(C<this.minX){C=this.minX;}if(C>this.maxX){C=this.maxX;}}if(this.constrainY){if(F<this.minY){F=this.minY;}if(F>this.maxY){F=this.maxY;}}C=this.getTick(C,this.xTicks);F=this.getTick(F,this.yTicks);return{x:C,y:F};},addInvalidHandleType:function(C){var D=C.toUpperCase();this.invalidHandleTypes[D]=D;},addInvalidHandleId:function(C){if(typeof C!=="string"){C=B.generateId(C);}this.invalidHandleIds[C]=C;},addInvalidHandleClass:function(C){this.invalidHandleClasses.push(C);},removeInvalidHandleType:function(C){var D=C.toUpperCase();delete this.invalidHandleTypes[D];},removeInvalidHandleId:function(C){if(typeof C!=="string"){C=B.generateId(C);}delete this.invalidHandleIds[C];},removeInvalidHandleClass:function(D){for(var E=0,C=this.invalidHandleClasses.length;E<C;++E){if(this.invalidHandleClasses[E]==D){delete this.invalidHandleClasses[E];}}},isValidHandleChild:function(F){var E=true;var H;try{H=F.nodeName.toUpperCase();}catch(G){H=F.nodeName;}E=E&&!this.invalidHandleTypes[H];E=E&&!this.invalidHandleIds[F.id];for(var D=0,C=this.invalidHandleClasses.length;E&&D<C;++D){E=!B.hasClass(F,this.invalidHandleClasses[D]);}return E;},setXTicks:function(F,C){this.xTicks=[];this.xTickSize=C;var E={};for(var D=this.initPageX;D>=this.minX;D=D-C){if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true;}}for(D=this.initPageX;D<=this.maxX;D=D+C){if(!E[D]){this.xTicks[this.xTicks.length]=D;E[D]=true;}}this.xTicks.sort(this.DDM.numericSort);},setYTicks:function(F,C){this.yTicks=[];this.yTickSize=C;var E={};for(var D=this.initPageY;D>=this.minY;D=D-C){if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true;}}for(D=this.initPageY;D<=this.maxY;D=D+C){if(!E[D]){this.yTicks[this.yTicks.length]=D;E[D]=true;}}this.yTicks.sort(this.DDM.numericSort);},setXConstraint:function(E,D,C){this.leftConstraint=parseInt(E,10);this.rightConstraint=parseInt(D,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(C){this.setXTicks(this.initPageX,C);}this.constrainX=true;},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks();},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0;},setYConstraint:function(C,E,D){this.topConstraint=parseInt(C,10);this.bottomConstraint=parseInt(E,10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(D){this.setYTicks(this.initPageY,D);
}this.constrainY=true;},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var D=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var C=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(D,C);}else{this.setInitPosition();}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize);}},getTick:function(I,F){if(!F){return I;}else{if(F[0]>=I){return F[0];}else{for(var D=0,C=F.length;D<C;++D){var E=D+1;if(F[E]&&F[E]>=I){var H=I-F[D];var G=F[E]-I;return(G>H)?F[D]:F[E];}}return F[F.length-1];}}},toString:function(){return("DragDrop "+this.id);}};YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider);})();YAHOO.util.DD=function(C,A,B){if(C){this.init(C,A,B);}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(C,B){var A=C-this.startPageX;var D=B-this.startPageY;this.setDelta(A,D);},setDelta:function(B,A){this.deltaX=B;this.deltaY=A;},setDragElPos:function(C,B){var A=this.getDragEl();this.alignElWithMouse(A,C,B);},alignElWithMouse:function(C,G,F){var E=this.getTargetCoord(G,F);if(!this.deltaSetXY){var H=[E.x,E.y];YAHOO.util.Dom.setXY(C,H);var D=parseInt(YAHOO.util.Dom.getStyle(C,"left"),10);var B=parseInt(YAHOO.util.Dom.getStyle(C,"top"),10);this.deltaSetXY=[D-E.x,B-E.y];}else{YAHOO.util.Dom.setStyle(C,"left",(E.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(C,"top",(E.y+this.deltaSetXY[1])+"px");}this.cachePosition(E.x,E.y);var A=this;setTimeout(function(){A.autoScroll.call(A,E.x,E.y,C.offsetHeight,C.offsetWidth);},0);},cachePosition:function(B,A){if(B){this.lastPageX=B;this.lastPageY=A;}else{var C=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=C[0];this.lastPageY=C[1];}},autoScroll:function(J,I,E,K){if(this.scroll){var L=this.DDM.getClientHeight();var B=this.DDM.getClientWidth();var N=this.DDM.getScrollTop();var D=this.DDM.getScrollLeft();var H=E+I;var M=K+J;var G=(L+N-I-this.deltaY);var F=(B+D-J-this.deltaX);var C=40;var A=(document.all)?80:30;if(H>L&&G<C){window.scrollTo(D,N+A);}if(I<N&&N>0&&I-N<C){window.scrollTo(D,N-A);}if(M>B&&F<C){window.scrollTo(D+A,N);}if(J<D&&D>0&&J-D<C){window.scrollTo(D-A,N);}}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false);},b4MouseDown:function(A){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(A),YAHOO.util.Event.getPageY(A));},b4Drag:function(A){this.setDragElPos(YAHOO.util.Event.getPageX(A),YAHOO.util.Event.getPageY(A));},toString:function(){return("DD "+this.id);}});YAHOO.util.DDProxy=function(C,A,B){if(C){this.init(C,A,B);this.initFrame();}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var B=this,A=document.body;if(!A||!A.firstChild){setTimeout(function(){B.createFrame();},50);return;}var F=this.getDragEl(),E=YAHOO.util.Dom;if(!F){F=document.createElement("div");F.id=this.dragElId;var D=F.style;D.position="absolute";D.visibility="hidden";D.cursor="move";D.border="2px solid #aaa";D.zIndex=999;D.height="25px";D.width="25px";var C=document.createElement("div");E.setStyle(C,"height","100%");E.setStyle(C,"width","100%");E.setStyle(C,"background-color","#ccc");E.setStyle(C,"opacity","0");F.appendChild(C);A.insertBefore(F,A.firstChild);}},initFrame:function(){this.createFrame();},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId);},showFrame:function(E,D){var C=this.getEl();var A=this.getDragEl();var B=A.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(B.width,10)/2),Math.round(parseInt(B.height,10)/2));}this.setDragElPos(E,D);YAHOO.util.Dom.setStyle(A,"visibility","visible");},_resizeProxy:function(){if(this.resizeFrame){var H=YAHOO.util.Dom;var B=this.getEl();var C=this.getDragEl();var G=parseInt(H.getStyle(C,"borderTopWidth"),10);var I=parseInt(H.getStyle(C,"borderRightWidth"),10);var F=parseInt(H.getStyle(C,"borderBottomWidth"),10);var D=parseInt(H.getStyle(C,"borderLeftWidth"),10);if(isNaN(G)){G=0;}if(isNaN(I)){I=0;}if(isNaN(F)){F=0;}if(isNaN(D)){D=0;}var E=Math.max(0,B.offsetWidth-I-D);var A=Math.max(0,B.offsetHeight-G-F);H.setStyle(C,"width",E+"px");H.setStyle(C,"height",A+"px");}},b4MouseDown:function(B){this.setStartPosition();var A=YAHOO.util.Event.getPageX(B);var C=YAHOO.util.Event.getPageY(B);this.autoOffset(A,C);},b4StartDrag:function(A,B){this.showFrame(A,B);},b4EndDrag:function(A){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden");},endDrag:function(D){var C=YAHOO.util.Dom;var B=this.getEl();var A=this.getDragEl();C.setStyle(A,"visibility","");C.setStyle(B,"visibility","hidden");YAHOO.util.DDM.moveToEl(B,A);C.setStyle(A,"visibility","hidden");C.setStyle(B,"visibility","");},toString:function(){return("DDProxy "+this.id);}});YAHOO.util.DDTarget=function(C,A,B){if(C){this.initTarget(C,A,B);}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return("DDTarget "+this.id);}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.8.1",build:"19"});(function(){if(LI.BalloonCalloutManager!==undefined){return
}LI.define("BalloonCalloutManager");
LI.BalloonCalloutManager=(function(){var f=500,p=f,d=100,u="callout-overlay",y="callout-",n='<span class="callout-arrow"></span>',h={},j={zIndex:10,constraintoviewport:true},v=null,A=false,i=null,l=null,m=null,c=false,s={},g=new YAHOO.util.KeyListener(document,{keys:27},{fn:function(){if(i){i.close(null)
}}});
var b=function(C,B){h[C]=B
};
var x=function(B){delete h[B]
};
var q=function(){A=true
};
var r=function(){A=false;
k()
};
var w=function(J){var G=J.config,I,D;
if(m){window.clearTimeout(m);
m=null;
i=null;
YDom.removeClass(l,"shown")
}if(i){i.close()
}i=J;
if(G.relativeToTrigger===true){v.cfg.setProperty("constraintoviewport",false)
}if(G.zIndex!==null&&G.zIndex!==undefined){v.cfg.setProperty("zIndex",G.zIndex)
}f=G.persist?d:p;
YDom.setStyle(l,"width",G.width);
l.className=[G.type," ",y,G.orientation," ",G.id].join("");
if(!G.cacheCalloutContent&&G.id){v.setBody(document.getElementById(G.id).innerHTML+n)
}else{v.setBody(G.content+n)
}v.render(document.body);
v.cfg.setProperty("context",[J.el,G.overlayCorner,G.contextCorner]);
l.dimensions=o(l);
J.el.dimensions=o(J.el);
I=G.orientation.split("-");
D=s[I[0]](J.el,l,I);
D.dx+=G.offsetX;
D.dy+=G.offsetY;
YDom.setXY(l,[l.dimensions.x+D.dx,l.dimensions.y+D.dy]);
if(YAHOO.env.ua.ie===6){v.moveTo([l.dimensions.x+D.dx,l.dimensions.y+D.dy])
}YDom.addClass(l,"shown");
if(G.eventsOnInternalElements){var C=G.eventsOnInternalElements;
if(C.elementClass&&C.elementClass!==""){var F=YDom.getElementsByClassName(C.elementClass),H=F.length;
for(var E=0,B;
E<H;
E++){B=F[E];
YEvent.purgeElement(B,false,C.elementEvent);
YEvent.on(B,C.elementEvent,J[C.elementAction],J,true)
}}c=true
}if(G.persist){g.enable()
}};
s={top:function(H,C,B,E){var I=H.dimensions||o(H),G=C.dimensions||o(C),D,F;
E=E||{};
if(B[0]==="top"){E.dx=I.x+0.5*I.width-(G.x+0.5*G.width);
E.dy=I.y+I.height-G.y;
if(B[1]){this[B[1]](H,C,B,E)
}}else{D=Y$(".callout-arrow",C,true);
F=o(D);
F.height=F.height||0;
E.dy+=(0.5*G.height-0.5*F.height)
}return E
},right:function(H,C,B,E){var I=H.dimensions||o(H),G=C.dimensions||o(C),D,F;
E=E||{};
if(B[0]==="right"){E.dx=I.x-(G.x+G.width);
E.dy=I.y+0.5*I.height-(G.y+0.5*G.height);
if(B[1]){this[B[1]](H,C,B,E)
}}else{D=Y$(".callout-arrow",C,true);
F=o(D);
F.width=F.width||0;
E.dx+=(-0.5*G.width+0.5*F.width)
}return E
},bottom:function(H,C,B,E){var I=H.dimensions||o(H),G=C.dimensions||o(C),D,F;
E=E||{};
if(B[0]==="bottom"){E.dx=I.x+0.5*I.width-(G.x+0.5*G.width);
E.dy=I.y-(G.y+G.height);
if(B[1]){this[B[1]](H,C,B,E)
}}else{D=Y$(".callout-arrow",C,true);
F=o(D);
F.height=F.height||0;
E.dy+=(-0.5*G.height+0.5*F.height)
}return E
},left:function(H,C,B,E){var I=H.dimensions||o(H),G=C.dimensions||o(C),D,F;
E=E||{};
if(B[0]==="left"){E.dx=I.x+I.width-G.x;
E.dy=I.y+0.5*I.height-(G.y+0.5*G.height);
if(B[1]){this[B[1]](H,C,B,E)
}}else{D=Y$(".callout-arrow",C,true);
F=o(D);
F.width=F.width||0;
E.dx+=(0.5*G.width-0.5*F.width)
}return E
}};
var o=function(D){var C=YDom.getXY(D),F,B,E;
if(!C||!C.length){return{}
}F=D.getBoundingClientRect();
E=parseInt(F.right-F.left,10);
B=parseInt(F.bottom-F.top,10);
return{height:B,width:E,x:C[0],y:C[1]}
};
var z=function(C){var B=i&&!i.isActive();
if((!A&&B)||C){v.setBody("");
i=null;
YDom.removeClass(l,"shown");
g.disable()
}};
var k=function(){if(!m){m=window.setTimeout(function(){window.clearTimeout(m);
m=null;
z(false)
},LI.BALLOON_CALLOUT_HIDE_DELAY||f)
}};
var t=function(){z(true)
};
var e=function(){v=new YAHOO.widget.Overlay(u,j);
v.render(document.body);
l=YDom.get(u);
YEvent.on(l,"mouseover",q);
YEvent.on(l,"mouseout",r);
if(LI.Events&&typeof LI.Events.trigger==="function"){LI.Events.trigger("LI.BalloonCalloutManager:initialized")
}};
var a=function(){return i
};
YEvent.onDOMReady(function(){if(YAHOO&&YAHOO.widget&&YAHOO.widget.Overlay){e()
}else{var B;
if(!(LI&&LI.UrlPackage&&LI.UrlPackage.containerCore)){throw new Error("The package url for container-core does not exist.")
}B=LI.UrlPackage.containerCore;
YAHOO.util.Get.script(B,{onSuccess:e,onFailure:function(){throw new Error("Failed to load dependency: "+B)
}})
}});
return{register:b,destroy:x,overlay:v,show:w,hide:k,showing:a,forceClose:t}
})()
})();
LI.define("BalloonCallout");
LI.BalloonCallout=function(c,r){var p=LI.BalloonCalloutManager,b=null,f=350,d="hover",a=YDom.get("callout-overlay")||null,m={"left":["tl","tr",5,0],"right":["tr","tl",-5,0],"top":["tl","tl",0,5],"bottom":["bl","tl",0,-5],"top-left":["tl","bl",0,5],"top-right":["tr","br",0,5],"right-top":["tr","tl",-5,0],"right-bottom":["br","bl",-5,0],"bottom-right":["br","tr",0,-5],"bottom-left":["bl","tl",0,-5],"left-bottom":["bl","br",5,0],"left-top":["tl","tr",5,0]},n,k,h,g;
r=r||{};
if(c.tagName&&c.tagName.toLowerCase()==="a"&&c.href.indexOf("#")>-1){r.anchor=true;
r.id=c.href.substring(c.href.indexOf("#")+1)
}else{r.anchor=false
}r={anchor:r.anchor,width:r.width||300,id:r.id||"",overlayCorner:r.overlayCorner||null,contextCorner:r.contextCorner||null,orientation:r.orientation||"left-top",content:r.content||null,events:r.events||["mouseover","mouseout"],eventsOnInternalElements:r.eventsOnInternalElements||null,type:r.type||"balloon-callout",offsetX:r.offsetX||0,offsetY:r.offsetY||0,relativeToTrigger:r.relativeToTrigger||false,zIndex:r.zIndex,persist:r.persist||false,delayOpen:r.delayOpen||false,cacheCalloutContent:r.cacheCalloutContent!==undefined?r.cacheCalloutContent:true,toolTipTextAttr:r.toolTipTextAttr||null,openCallback:r.openCallback||null,closeCallback:r.closeCallback||null};
var o=function(s){YEvent.preventDefault(s);
if(r.persist){YEvent.stopPropagation(s)
}};
var q=function(s){this.persist=true;
if(YAHOO.util.Dom.hasClass(s.target,"callout-close")){j()
}};
var e=function(s){var t=false;
if(s.button){t=(s.button===2);
this.persist=t?true:false
}if(!this.persist){j.call(this,s)
}else{this.persist=false
}};
var i=function(){var t=this;
this.active=true;
YDom.addClass(c,d);
if(g){n=c.title;
c.title=""
}function s(){p.show(t);
t.openEvent.fire();
if(!a){a=YDom.get("callout-overlay")
}if(r.persist){YEvent.on(a,"click",q,t,true);
YEvent.on(document,"click",e,t,true);
var u=YDom.getElementsByClassName("callout-close",null,a);
if(u.length>0){u[0].focus()
}}else{YEvent.removeListener(a,"click",q);
YEvent.removeListener(document,"click",e)
}if(r.openCallback&&typeof(r.openCallback)==="function"){r.openCallback(t)
}}if(r.delayOpen&&!b){b=window.setTimeout(function(){b=null;
s()
},f)
}else{s()
}};
var j=function(s){var t=this;
this.active=false;
this.persist=false;
YDom.removeClass(c,d);
if(g){c.title=n
}if(r.delayOpen&&b){window.clearTimeout(b);
b=null
}if(s){p.hide()
}else{p.forceClose()
}if(r.persist){YEvent.removeListener(a,"click",q);
YEvent.removeListener(document,"click",e);
if(c){c.focus()
}}if(r.closeCallback&&typeof(r.closeCallback)==="function"){r.closeCallback(t)
}};
var l=function(s){this.active=!this.active;
if(this.active||this!==p.showing()){i.call(this,s)
}else{if(!r.persist||(r.events[0]!=="mouseover")){j.call(this,s)
}else{this.active=true
}}};
this.isActive=function(){return this.active
};
this.destroy=function(){if(r.anchor){YEvent.removeListener(c,"click",o)
}if(r.persist){YEvent.removeListener(c,r.events[0],l)
}else{YEvent.removeListener(c,r.events[0],i);
YEvent.removeListener(c,r.events[1],j)
}if(r.eventsOnInternalElements){var w=r.eventsOnInternalElements;
if(w.elementClass&&w.elementClass!==""){var t=YDom.getElementsByClassName(w.elementClass),v=t.length;
for(var u=0,s;
u<v;
u++){s=t[u];
YEvent.removeListener(s,w.elementEvent,w.elementAction)
}}}j();
p.destroy(c.id)
};
this.setContent=function(s){if(!s){s=document.getElementById(r.id).innerHTML
}r.content=s
};
if(!r.content){r.content=document.getElementById(r.id);
if(!r.content){throw"Could not find info element"
}else{k=r.content.innerHTML;
if(r.toolTipTextAttr){n=c.getAttribute(r.toolTipTextAttr);
k=k.replace("__PLACEHOLDER__",LI.htmlEncode(n))
}r.content=k
}}if(r.width!=="auto"){r.width+="px"
}if(r.anchor){YEvent.on(c,"click",o)
}if(!r.overlayCorner){r.overlayCorner=m[r.orientation][0]
}if(!r.contextCorner){r.contextCorner=m[r.orientation][1]
}r.offsetX+=m[r.orientation][2];
r.offsetY+=m[r.orientation][3];
this.openEvent=new YAHOO.util.CustomEvent("open");
YDom.generateId(c,"callout-trigger-");
g=(r.toolTipTextAttr==="title");
this.config=r;
this.el=c;
this.active=false;
this.close=j;
this.open=i;
this.toggle=l;
this.persist=false;
p.register(c.id,this);
if(r.persist){YEvent.on(c,r.events[0],l,this,true)
}else{YEvent.on(c,r.events[0],i,this,true);
YEvent.on(c,r.events[1],j,this,true)
}};
LI.Controls.register("LI.BalloonCallout");
LI.define("BalloonCalloutDelegator");
LI.BalloonCalloutDelegator=function(c,a){var b={};
a=a||{};
a.dataId=a.dataId?("data"+a.dataId):"data-li-tooltip-id";
function d(g,e){if(e&&!b[e.id]){a.id=g;
var f=new LI.BalloonCallout(e,a);
f.toggle();
b[e.id]=true
}}YEvent.on(c,"mouseover",function(e){var f=YEvent.getTarget(e),g=YDom.getAttribute(f,a.dataId);
if(!g&&YDom.getAttribute(f.parentNode,a.dataId)){f=f.parentNode;
g=YDom.getAttribute(f,a.dataId)
}if(g){YDom.generateId(f);
d(g,f);
YEvent.stopPropagation(e)
}})
};LI.define("Reveal");
LI.Reveal=function(c,b){var b={targetNode:b.targetNode,subHide:(typeof b.subHide!=="undefined")?b.subHide:true},f=0;
function e(i){var h=b.targetNode;
if(i.tagName!=="INPUT"){if(Y$("input[type=checkbox]",i).length>0){i=Y$("input[type=checkbox]",i,true)
}else{return
}}var g=h+"",j=g.substring(0,1)==="!";
if(j){g=g.substring(1)
}if((!j&&i.checked)||(j&&!i.checked)){LI.show(g)
}else{LI.hide(g)
}}function d(i){var g=YDom.getAttribute(i,"value"),h=b.targetNode;
for(var j in h){if(g===j||i.value===j){LI.show(h[j])
}else{LI.hide(h[j])
}}}function a(g){var l=(g)?YEvent.getTarget(g):c,k=b.targetNode;
l=(l.tagName==="OPTION")?l.parentNode:l;
if(YAHOO.lang.isObject(k)){if(l.tagName==="SELECT"){d(l)
}else{if(l.tagName==="INPUT"&&l.type==="radio"&&!f){d(l);
if(!b.subHide&&!f){f=1
}}else{var h=Y$("input[type=radio]",c);
for(var j=0;
h.length>j;
j++){if(h[j].checked===true){var l=h[j];
break
}}d(l)
}}}else{e(l)
}}if(c.tagName==="SELECT"){YEvent.on(c,"change",a)
}else{YEvent.on(c,"click",a)
}a()
};function LargerProfilePicture(g,c){var c={vieweeId:c.vieweeId||"",imgSrc:c.imgSrc||"",imgHeight:(c.imgHeight&&c.imgHeight>=200)?c.imgHeight:200,imgWidth:(c.imgWidth&&c.imgWidth>=200)?c.imgWidth:200},a=false,f='<div class="loading" style="width: '+c.imgWidth+"px; height: "+c.imgHeight+'px;">&nbsp;</div>',b='<img src="'+c.imgSrc+'" height="'+c.imgHeight+'" width="'+c.imgWidth+'" />',h=50,e={id:"larger-profile-photo",type:"no-header",width:c.imgWidth+h,className:"larger-profile-photo",content:{html:f,title:""}},d;
if(g&&c.imgSrc&&c.vieweeId){$(g).append('<span class="larger-profile-photo-control"></span>').on("click",function(i){i.preventDefault();
WebTracking.trackUserAction("larger-profile-picture","viewee-id:"+c.vieweeId);
if(a){e.content.html=b;
LI.Dialog().open(e)
}else{LI.Dialog().open(e);
$("<img/>").on("load",function(){e.content.html=b;
LI.Dialog().swap(e);
a=true
}).prop("src",c.imgSrc)
}})
}};(function(){var a={};
var b=function(g,h,f){var l=this._history,m=l.length,k=null;
for(var j=0;
j<m;
j++){if(l[j].name===g){if(l[j].payload[h]&&l[j].payload[h]===f){k=l[j].payload
}}}return k
};
var e=function(f){if(!a[f]){a[f]=new YAHOO.util.EventProvider();
a[f]._history=[];
a[f].inHistory=b
}return a[f]
};
var d=function(f){var f=f||{},j=f.payload||{};
if(f.eventName){for(var g in a){var h=a[g]._history,k=h.length;
a[g].createEvent(f.eventName).fire(f.payload);
h[k]={"name":f.eventName,"payload":f.payload}
}}};
var c=function(){};
c.prototype={create:e,notifyAll:d};
LI.define("MediatorFactory");
LI.MediatorFactory=new c()
})();LI.define("Discovery");
LI.Discovery=function(c,b){if(!c){return
}this.module=c;
this.config=b;
this.highlightedItem=0;
this.numVisible=this.config.numVisible||4;
this.pageWidth=this.config.pageWidth||244;
this.itemWidth=this.config.itemWidth||61;
this.currentItemWidth=this.config.currentItemWidth||65;
this.panelWidth=this.config.panelWidth||278;
this.peekWidth=this.config.peekWidth||27;
this.peek="right";
this.startMargin=0;
this.sliderOffset=this.config.sliderOffset||0;
this.panel=Y$(".discovery-panel",this.module,true);
this.tabSlider=this.module.getElementsByTagName("ol")[0];
this.detailList=this.tabSlider.getElementsByTagName("dl");
this.navNext=YDom.get(this.config.navNext)||Y$(".discovery-next",this.module,true);
this.navPrevious=YDom.get(this.config.navPrevious)||Y$(".discovery-prev",this.module,true);
this.itemList=this.tabSlider.getElementsByTagName("li");
this.imgList=this.tabSlider.getElementsByTagName("img");
this.loader=Y$(".discovery-spinner",this.module,true);
this.itemCount=this.itemList.length;
this.prefetchedPages=this.config.prefetchedPages||3;
this.startPage=0;
this.currentPage=0;
this.maxPages=this.itemCount%this.numVisible===0?(Math.floor(this.itemCount/this.numVisible)-1):Math.floor(this.itemCount/this.numVisible);
this.timer=null;
this.endpoint=this.config.endpoint||"";
this.offset=+this.config.offset||0;
this.fetch=this.config.fetch||false;
this.fetches=[];
this.fetchParams=this.config.fetchParams||{};
this.vieweeId=this.config.viewerId||LI.getQueryStringParam("id");
this.template=this.config.template;
this.max=+this.config.max||false;
this.rootContext=this.config.rootContext||"RightTop.discovery.people";
this.offsetKey=this.config.offsetKey||"offset";
this.recordsKey=this.config.recordsKey||"records";
this.panelTransitions=this.config.panelTransitions||false;
this.nextEvent=new YAHOO.util.CustomEvent("next",this);
this.prevEvent=new YAHOO.util.CustomEvent("prev",this);
if(b.legacy){var d=LI.Bidi,a="margin-"+(d?d.flip("left"):"left");
this.init=function(){YEvent.addListener(this.module,"click",this.handleClick,this,true);
YEvent.addListener(this.module,"focusin",this.handleFocus,this,true);
YEvent.addListener(this.imgList,"mouseover",this.handleHover,this,true);
YEvent.addListener(this.imgList,"mouseout",this.clearTimer,this,true);
this.setupNav();
this.setupTabs();
this.setupIndex();
this.updateHighlight()
};
this.handleClick=function(e){if(YEvent.getTarget(e)===this.navNext){if(this.currentPage<this.maxPages){this.goNext()
}else{if(this.fetch){this.fetchMore()
}}}if(YEvent.getTarget(e)===this.navPrevious){if(this.currentPage>this.startPage){this.goBack()
}}};
this.handleHover=function(f){var g=this,h=YEvent.getTarget(f),e=LI.getDataAttribute(h.parentNode.parentNode,"index");
this.timer=setTimeout(function(){g.updateHighlight(e)
},300)
};
this.goNext=function(){this.currentPage++;
this.startMargin=this.startMargin-this.pageWidth;
YDom.setStyle(this.tabSlider,a,this.startMargin+"px");
this.setupNav();
this.updateHighlight();
this.setupTabs()
};
this.goBack=function(){this.currentPage--;
this.startMargin=this.startMargin+this.pageWidth;
YDom.setStyle(this.tabSlider,a,this.startMargin+"px");
this.setupNav();
this.updateHighlight();
this.setupTabs()
};
this.fetchMore=function(){var e,m,k,i,g,h,j,o,f,n,l;
e=this.endpoint;
k=(this.currentPage*this.numVisible)+this.numVisible+this.offset;
i=this.numVisible*2;
g=this.fetchParams;
h=this.vieweeId;
l="";
j={id:h,offset:k,records:i};
for(m in g){if(g.hasOwnProperty(m)){j[m]=g[m]
}}for(m in j){if(j.hasOwnProperty(m)){l+=m+"="+j[m]+"&"
}}o=function(q){var p;
if(q.responseText){p=q.responseText.RightTop||q.responseText.Discovery||q.responseText
}if((p&&p.discovery&&p.discovery.people&&p.discovery.people.length<this.numVisible)||(this.max&&this.max<=this.itemCount+this.offset+this.numVisible)){this.fetch=false;
this.setupNav()
}if(p&&p.discovery&&p.discovery.people&&p.discovery.people.length>0){p.discovery.people=p.discovery.people.splice(0,this.numVisible);
this.itemCount=this.itemCount+this.numVisible;
this.maxPages++;
this.renderMore(p);
this.setupIndex();
this.goNext()
}LI.hide(this.loader)
};
f=function(){LI.hide(this.loader)
};
n={success:o,failure:f,scope:this};
LI.show(this.loader);
LI.asyncRequest("POST",e,n,l)
};
this.renderMore=function(f){var e=this.tabSlider;
YEvent.purgeElement(this.tabSlider,true);
dust.render(this.template,f.discovery,function(h,g){e.innerHTML+=g
});
YEvent.addListener(this.imgList,"mouseover",this.handleHover,this,true);
YEvent.addListener(this.imgList,"mouseout",this.clearTimer,this,true)
}
}this.init()
};
LI.Discovery.prototype={init:function(){var a=this.prefetchedPages*this.numVisible,b=this.itemCount;
if(a!==b){this.fetch=false
}YDom.addClass(this.module,"discovery-peek-right");
YEvent.addListener(this.module,"click",this.handleClick,this,true);
YEvent.addListener(this.module,"focusin",this.handleFocus,this,true);
YEvent.addListener(this.module,"mouseover",this.handleMouseOver,this,true);
YEvent.addListener(this.module,"mouseout",this.handleMouseOut,this,true);
this.setupNav();
this.setupTabs();
this.setupIndex();
this.updateHighlight()
},handleClick:function(a){if(YEvent.getTarget(a)===this.navNext){if(this.fetches.length&&this.currentPage===this.maxPages-1){YDom.addClass(this.module,"discovery-loading")
}else{if(this.fetch){if(this.currentPage+this.prefetchedPages>=this.maxPages&&this.currentPage<this.maxPages){this.goNext();
this.fetchMore()
}else{if(this.currentPage+this.prefetchedPages<this.maxPages){this.goNext()
}else{if(this.currentPage===this.maxPages){this.fetchMore(true)
}}}}else{if(this.currentPage<this.maxPages){this.goNext()
}}}}if(YEvent.getTarget(a)===this.navPrevious){if(this.currentPage>this.startPage){this.goBack()
}}},handleFocus:function(b){var a;
if(YEvent.getTarget(b).parentNode.parentNode===this.tabSlider){a=LI.getDataAttribute(YEvent.getTarget(b).parentNode,"index");
this.updateHighlight(a)
}},clearTimer:function(){if(this.timer){clearTimeout(this.timer)
}},handleMouseOver:function(c){var d=this,f=YEvent.getTarget(c),b=parseInt(LI.getDataAttribute(YDom.getAncestorByTagName(f,"li"),"index"),10),e=(this.currentPage+1)*this.numVisible,a=(this.currentPage)*this.numVisible;
if(b>=0){this.timer=setTimeout(function(){if(d.peek==="right"&&b===e){d.goTo(b,"right")
}else{if(d.peek==="left"&&b===a){d.goTo(b)
}}d.updateHighlight(b)
},250)
}},handleMouseOut:function(){this.clearTimer()
},emitEvent:function(b){var a=b+"Event";
if(this[a]){this[a].fire({currentPage:this.currentPage,maxPages:this.maxPages,itemsPerPage:this.numVisible,totalItems:this.itemCount})
}},goNext:function(){this.currentPage++;
this.fetchDeferredImages();
this.goTo(this.currentPage*this.numVisible);
this.updateHighlight();
this.setupNav();
this.setupTabs();
this.emitEvent("next")
},goBack:function(){this.currentPage--;
this.goTo(this.currentPage*this.numVisible);
this.updateHighlight();
this.setupNav();
this.setupTabs();
this.emitEvent("prev")
},goTo:function(a,b){b=b||"left";
if(a>=0){if(b==="left"){this.peek="right";
YDom.addClass(this.module,"discovery-peek-right");
YDom.removeClass(this.module,"discovery-peek-left");
this.startMargin=-(a*(this.itemWidth+this.sliderOffset))
}else{this.peek="left";
YDom.addClass(this.module,"discovery-peek-left");
YDom.removeClass(this.module,"discovery-peek-right");
this.startMargin=-((a-this.numVisible)*(this.itemWidth+this.sliderOffset)+this.peekWidth)
}YDom.setStyle(this.tabSlider,"margin-left",this.startMargin+"px")
}},setupNav:function(){if((this.itemCount<=this.numVisible&&!this.fetch)||(this.itemCount<this.numVisible)||(this.max&&this.max-this.offset<=this.numVisible)){this.hideNav()
}else{if(this.currentPage===this.startPage){YDom.addClass(this.navPrevious,"disabled");
YDom.removeClass(this.navNext,"disabled")
}else{if((this.currentPage===this.maxPages&&!this.fetch)||(this.max&&this.max<=this.itemCount+this.offset)){YDom.addClass(this.navNext,"disabled");
YDom.removeClass(this.navPrevious,"disabled")
}else{YDom.removeClass(this.navNext,"disabled");
YDom.removeClass(this.navPrevious,"disabled")
}}}},setupTabs:function(){var d,b=this.itemList,c,a;
for(c=0,a=this.itemCount;
c<a;
c++){if(b[c]){d=Y$("a",this.itemList[c],true);
if(d){YDom.setAttribute(this.itemList[c].getElementsByTagName("a")[0],"tabindex","-1")
}}}for(c=this.currentPage*this.numVisible,a=c+this.numVisible;
c<a;
c++){if(this.itemList[c]){d=Y$("a",this.itemList[c],true);
if(c<this.itemCount&&d){YDom.setAttribute(this.itemList[c].getElementsByTagName("a")[0],"tabindex","0")
}}}},setupIndex:function(){for(var a=0;
a<this.itemCount;
a++){if(this.itemList[a]){LI.setDataAttribute(this.itemList[a],"index",a)
}}},updateHighlight:function(a){YDom.removeClass(this.detailList[this.highlightedItem],"selected");
YDom.removeClass(this.itemList[this.highlightedItem],"discovery-active");
if(a){this.highlightedItem=a
}else{this.highlightedItem=this.currentPage*this.numVisible
}YDom.addClass(this.detailList[this.highlightedItem],"selected");
YDom.addClass(this.itemList[this.highlightedItem],"discovery-active");
if(this.panelTransitions){this.panel.className="discovery-panel";
YDom.addClass(this.panel,LI.getDataAttribute(this.itemList[this.highlightedItem],"type")+"-active")
}},fetchMore:function(n){var a=this.endpoint,k=this.itemCount+this.offset,g=(this.currentPage-this.maxPages+this.prefetchedPages)*this.numVisible,e=this.fetchParams,f=this.vieweeId,b="",j,d,o,m,h;
if(this.fetches.length){for(m=0,h=this.fetches.length;
m<h;
m+=1){k+=this.fetches[m];
g-=this.fetches[m]
}}this.fetches.push(g);
j={};
if(f){j.id=f
}j[this.offsetKey]=k;
j[this.recordsKey]=g;
for(o in e){if(e.hasOwnProperty(o)){j[o]=e[o]
}}for(o in j){if(j.hasOwnProperty(o)){b+=o+"="+j[o]+"&"
}}function p(s){var y=s.responseText,w=y,u=0,z,r,t,v,x=this.max,q=this.offset,l=this.itemCount,A=this.numVisible;
if(y&&y.Discovery){this.rootContext="Discovery.discovery.people"
}if(w){r=this.rootContext.split(".");
for(t=0,v=r.length;
t<v;
t++){if(!w[r[t]]){break
}z=w;
w=w[r[t]]
}u=w.length||0
}this.fetches.shift();
if(u<A||x&&x<=l+q+A){this.fetch=false
}if(YAHOO.lang.isArray(w)&&u>0){this.itemCount+=u;
this.maxPages+=Math.ceil(u/A);
this.renderMore(z);
this.setupIndex();
this.setupNav()
}if((n&&u>0)||YDom.hasClass(this.module,"discovery-loading")){this.goNext();
if(this.fetch&&YDom.hasClass(this.module,"discovery-loading")){this.fetchMore()
}}YDom.removeClass(this.module,"discovery-loading")
}function c(){this.fetches.shift();
YDom.removeClass(this.module,"discovery-loading")
}d={success:p,failure:c,scope:this};
if(n){YDom.addClass(this.module,"discovery-loading")
}LI.asyncRequest("POST",a,d,b)
},renderMore:function(e){var d=this.tabSlider,c=document.createElement("div"),f=document.createDocumentFragment(),b,a;
dust.render(this.template,e,function(h,g){c.innerHTML=g;
for(b=0,a=c.children.length;
b<a;
b+=1){f.appendChild(c.children[0])
}d.appendChild(f)
})
},fetchDeferredImages:function(){var b=this.imgList,a=b.length,d,c,e;
for(d=0;
d<a;
d++){c=b[d];
e=c.getAttribute("data-li-src");
if(e&&e!==c.src){c.src=e
}}},hideNav:function(){LI.hide(this.navNext);
LI.hide(this.navPrevious)
}};$(function(){var N=$("#profile"),T=$("#wrapper"),an,aF=$("#header").outerHeight(),ay="form-dirty",I="addSecProfileSectionDialog",aw=5000,ao=(typeof window.console!=="undefined")?window.console:{log:function(){}},af=false,x,aE,k,au,aA,r="with-raw-summary",aD=".edit-tools a",s="background-skills-container",m,L=false,av=["profile_v2_summary","profile_v2_positions","profile_v2_educations","profile_v2_honors","profile_v2_test_scores","profile_v2_certifications","profile_v2_organizations","profile_v2_volunteering","profile_v2_additional_info","profile_v2_courses","profile_v2_languages","profile_v2_patents","profile_v2_publications","profile_v2_projects","profile_v2_skills","profile_v2_contact_info","profile_v2_badge","p2_basic_info"];
function l(aL){var aH=aL.attr("id"),aJ=aH+"-edit",aG=aH+"-view",aK=aJ+"-clone",aN=$("#"+aG),aI=$("#"+aJ),aM;
$("#"+aK).remove();
if(aI.length){aM=Z(aI);
aM.attr("id",aK);
q(aI,aM);
aN.hide();
aI.fadeIn("fast",function(){a(aI)
});
X([aI])
}}function E(aJ){var aI="profile-blank-form-clone",aH,aG;
if(aJ.size()){aJ.find("."+aI).remove();
aJ.removeClass("collapsed");
aH=aJ.find(".profile-blank-form");
if(aH.length){aG=Z(aH);
aG.attr("class",aI);
q(aH,aG);
aH.fadeIn("fast",function(){a(aH)
});
X([aH])
}}}function ag(aL){var aH=aL.attr("id"),aI=aH+"-edit",aG=aH+"-view",aK=aI+"-clone",aJ=$("#"+aI),aM=$("#"+aH);
if(aJ.length){aJ.fadeOut("fast",function(){$("#"+aG).show();
$("#"+aK).remove()
});
ai([aJ]);
aM.parent().find(aD).first().focus()
}}function b(aG){if(aG&&aG.length){aG.fadeOut(function(){aG.find(".profile-blank-form-clone").remove()
});
ai([aG])
}}function o(){$(".profile-blank-form, .edit-form").hide()
}function y(aH,aG){var aI=N.find("#"+aH),aJ;
if(aI.find(".profile-blank-form").size()>0){aJ=function(){E(aI)
}
}else{aJ=function(){l(aI.find(".editable-item"))
}
}R(aI,aG,aJ)
}function R(aJ,aH,aG){var aI;
if(aJ.size()){aJ.removeClass("hidden");
aI=aJ.next();
if(aI.is("hr")){aI.removeClass("hidden")
}if(aH){S(aJ,function(){aG()
})
}else{aG()
}}}function j(aH){var aG;
if(aH.size()){aH.addClass("hidden");
aG=aH.next();
if(aG.is("hr")){aG.addClass("hidden")
}}}function C(aH){var aG=aH.responseData||{};
v(ax(aG.responseText));
aB(ac(aG.responseText));
H(p(aG.responseText));
ab(aH);
LI.Profile.helper.injectAlertA11y(LI.i18n.get("editSaveSuccess"))
}function ab(aK){var aO=aK.containerId,aS=$("#"+aO),aI=aK.listTemplate,aN=aK.onlyChildContent,aM=aK.responseData,aQ=(aK.refreshToolbox!==undefined)?aK.refreshToolbox:false,aH=aK.redirectUrl,aJ,aP,aT,aL,aG={},aR=$.fn.Profile;
if(aH){aT=al();
aT.removeData(ay);
window.location.href=aH;
return
}aL=function(aU){if(aN){aS.html($(aU).html())
}else{aS.replaceWith(aU)
}aS=$("#"+aO);
aR.fixSectionDividers();
if(aN){LI.Controls.parseFragment(aS[0])
}else{LI.Controls.parseFragment(aS.parent().get(0))
}aS.find(aD).first().focus();
if(aO===s){aR.fire(aR.EVENTS.SKILLS_SECTION_RENDERED)
}};
LI.Profile2.Render.render({template:aI,response:aM,success:aL});
ai();
aS=$("#"+aO);
aS.find(".background-section, hr").removeClass("hidden");
aP=aS.find(".background-section");
if(aP.length){aJ=w(aM.responseText);
aG["completenessLevel"]=aJ;
if(!aQ){aG["sectionId"]=aP.attr("id")
}aR.fire(aR.EVENTS.PROFILE_UPDATE_SUCCESS,[aG]);
S(aP)
}if(aQ){D(aM)
}}function ad(aG){var aL=aG.itemId,aM=$("#"+aL),aH=aG.responseData,aK=(aG.refreshToolbox!==undefined)?aG.refreshToolbox:true,aI,aJ,aO,aN;
if(aM.length){aI=aM.closest(".background-section");
aM.remove();
ai();
if(aI.length){S(aI)
}}aJ=e(aH.responseText);
aO=aq(aH.responseText);
aN=A(aH.responseText);
if(aJ){v(aJ)
}if(aO){aB(aO)
}if(aN){H(aN)
}if(aK){D(aH)
}LI.Profile.helper.injectAlertA11y(LI.i18n.get("editRemoveSuccess"))
}function u(aG){LI.Dialog().close();
if(!LI.GlobalAlertManager){ar()
}}function K(aI){var aG,aH;
if(aI){aH=aI
}else{aG=al();
if(aG){aH=LI.Controls.getControl(aG.attr("id"),"FrontierAJAXForm")
}}if(aH){aH.resetFormSubmit()
}J(LI.i18n.get("unableToProcessRequest"),"error");
LI.Dialog().close()
}function aa(){var aH=window.location.search,aG=false;
aH=decodeURIComponent(aH);
aG=(aH.indexOf("report.success")>-1);
if(aG){ar()
}}function J(aH,aG){LI.injectAlert({message:aH,type:aG,dismissable:true,autoHide:true,animate:true});
if(!LI.GlobalAlertManager){ar()
}}function ar(){setTimeout(function(){LI.removeAlert(null,true)
},aw)
}function D(aG){if(aG.responseText.toolbox){$.fn.ProfileEditToolbox.refreshSuggestions(aG)
}else{ap(au,["profile_v2_toolbox"],{success:function(aH){$.fn.ProfileEditToolbox.refreshSuggestions(aH)
},error:function(){}})
}}function ap(aJ,aH,aI){if(!aJ){return
}var aG=aJ+((aJ.indexOf("?")===-1)?"?":"&")+"x-a="+aH.join(",");
LI.asyncRequest("GET",aG,{success:function(aK){if(aI.success){aI.success(aK)
}},failure:function(){if(aI.error){aI.error()
}},custom:{error:function(){},exception:function(){return false
}}})
}function ax(aH){var aG=function(aI,aK){var aJ=0;
if(aK==="html"&&aI.html&&aI.html.timestamp&&aI.html.timestamp.value){aJ=aI.html.timestamp.value
}return(aJ>0)?aJ:false
};
return t(aH,aG)
}function ac(aH){var aG=function(aJ,aK){var aI=0;
if(aK==="html"&&aJ.html&&aJ.html.profileVersionTag&&aJ.html.profileVersionTag.value){aI=aJ.html.profileVersionTag.value
}return(aI>0)?aI:false
};
return t(aH,aG)
}function p(aH){var aG=function(aJ,aK){var aI=0;
if(aK==="html"&&aJ.html&&aJ.html.privacySettingsVersionTag&&aJ.html.privacySettingsVersionTag.value){aI=aJ.html.privacySettingsVersionTag.value
}return(aI>0)?aI:false
};
return t(aH,aG)
}function e(aH){var aG;
if(aH.toolbox&&aH.toolbox.profileTimestamp&&aH.toolbox.profileTimestamp.timestamp){aG=aH.toolbox.profileTimestamp.timestamp
}else{if(aH.timestamp){aG=aH.timestamp
}}return aG
}function aq(aH){var aG;
if(aH.toolbox&&aH.toolbox.versionTags&&aH.toolbox.versionTags.profileVersionTag){aG=aH.toolbox.versionTags.profileVersionTag
}return aG
}function A(aH){var aG;
if(aH.toolbox&&aH.toolbox.versionTags&&aH.toolbox.versionTags.privacySettingsVersionTag){aG=aH.toolbox.versionTags.privacySettingsVersionTag
}return aG
}function w(aH){var aG=function(aI,aJ){var aK=0;
if(aJ==="completenessLevel"){aK=aI.completenessLevel
}return(aK>0)?aK:false
};
return t(aH,aG)
}function t(aI,aG){var aK,aJ,aH=0;
if(!$.isPlainObject(aI)){return aH
}for(aK in aI){aH=aG(aI,aK);
if(aH===false){aH=t(aI[aK],aG)
}if(aH){break
}}return aH
}function Z(aG){var aI,aH;
aI=aG[0].innerHTML.replace(/^\s*<!--/,"").replace(/-->\s*$/,"");
aH=$("<div></div>");
aH[0].innerHTML=aI;
if(x){aH.find("input[name=timestamp]").each(function(){$(this).val(x)
})
}if(aE){aH.find("input[name=profileVersionTag]").each(function(){$(this).val(aE)
})
}if(k){aH.find("input[name=privacySettingsVersionTag]").each(function(){$(this).val(k)
})
}return aH
}function q(aG,aH){aG.append(aH);
LI.Controls.parseFragment(aH[0]);
aG.find(".btn-secondary").removeClass("hidden");
h()
}function F(){return x
}function v(aH){var aG=$.fn.Profile;
if(aH){$("input[name=timestamp]").each(function(){$(this).val(aH)
});
x=aH;
aG.fire(aG.EVENTS.TIMESTAMP_CHANGED)
}}function aB(aG){var aH=$.fn.Profile;
if(aG){$("input[name=profileVersionTag]").each(function(){$(this).val(aG)
});
aE=aG;
aH.fire(aH.EVENTS.TIMESTAMP_CHANGED)
}}function H(aH){var aG=$.fn.Profile;
if(aH){$("input[name=profileVersionTag]").each(function(){$(this).val(aH)
});
k=aH;
aG.fire(aG.EVENTS.TIMESTAMP_CHANGED)
}}function h(){$.fn.ProfileEditSummary.immediatelyAppendToSummary();
$.fn.ProfileEditPosition.resetForms();
$.fn.ProfileEditEducation.resetForms()
}function z(){var aH=false,aG=al();
if(aG&&aG.length){if(G(aG)){aH=true
}}return aH
}function G(aG){return(aG&&aG.length)?aG.data(ay):false
}function al(){var aG,aI,aH;
$(".edit-form, .profile-blank-form").each(function(){if($(this).find("form").is(":visible")){aG=$(this)
}});
if(aG){aI=aG.find("form");
if(aI.length){aH=aI.first()
}}return aH
}function U(aG){var aI=al(),aH;
if(aI){aH=aI.offset().top-aF-50;
$("html,body").animate({scrollTop:aH});
M(aG);
WebTracking.trackUserAction("prof-disabled-edit-hovercard-jump-to-form")
}}function aC(aG){var aH=document.createElement("div");
if(LI.Profile.disabledEditCallout==="persist-box"){m=new LI.HopscotchCallout(aH,aG)
}else{m=new LI.BalloonCallout(aH,aG)
}}function at(aG){if(LI.Profile.disabledEditCallout==="persist-box"){m.open(aG,aG.currentTarget);
WebTracking.trackUserAction("prof-disabled-edit-hovercard-open")
}else{if(!m.active&&!L){m.el=aG.currentTarget;
m.open();
aG.stopPropagation()
}}L=false
}function M(aG){m.close()
}function n(){if(LI.Profile.disabledEditCallout){if(LI.Profile.disabledEditCallout==="tooltip"){if(!m){aC({id:"disabled-edit-callout",type:"tooltip-callout",width:"auto",orientation:"bottom"})
}T.on("mouseenter",".edit-tools",at);
T.on("mouseleave",".edit-tools",M)
}else{if(LI.Profile.disabledEditCallout==="persist-box"){if(!m){aC({id:"disabled-edit-callout",orientation:"top",xOffset:-10,content:LI.i18n.get("Profile-disabledEditContent"),ctaLabel:LI.i18n.get("Profile-disabledEditCTA"),ctaOnClick:U})
}T.on("click",".edit-tools",at);
L=true
}}}}function aj(){if(LI.Profile.disabledEditCallout==="tooltip"){T.off("mouseenter",".edit-tools",at);
T.off("mouseleave",".edit-tools",M)
}else{if(LI.Profile.disabledEditCallout==="persist-box"){T.off("click",".edit-tools",at)
}}}function O(){T.addClass("active-edit");
var aG=al();
if(typeof aG!=="undefined"){an=aG.closest(".background-section").addClass("active-edit")
}n()
}function P(){T.removeClass("active-edit");
aj();
if(an&&an.length){an.removeClass("active-edit")
}}function g(aG){var aH=$("#"+I);
return(aH.size()>0&&aG.attr("data-allow-secondary-add")===undefined)
}function c(){var aI,aH,aG;
aG=$("#"+I).attr("data-li-dialog-title");
aH={name:I,content:{title:aG,contentNode:I}};
aI=new LI.Profile.DialogHelper(null,aH);
if(aI){aI.showDialog()
}}function f(aH){var aG=al();
if(aG){am(aG)
}}function i(aI){var aG,aH;
aG=al();
if(aG&&G(aG)){aH=LI.Controls.getControl(aG.attr("id"),"FrontierAJAXForm");
if(aH){aH.addSuccessHandler(function(aJ){$.fn.Profile.switchToView()
});
aG.removeData(ay);
aH.submitForm()
}}else{if(aG){am(aG)
}$.fn.Profile.switchToView()
}}function am(aG){var aH;
if(aG&&aG.length){aH=aG.closest(".profile-blank-form");
if(aH.length){b(aH)
}aH=aG.closest(".editable-item");
if(aH.length){ag(aH)
}}}function S(aH,aJ){var aG=aH.offset().top-aF,aI=false;
if(aG){$("html, body").animate({scrollTop:aG-12},300,function(){if(aJ&&!aI){aI=true;
aJ()
}})
}}function X(aH){var aG=$.fn.Profile;
aG.fire(aG.EVENTS.FORM_OPENED,aH)
}function ai(aH){var aG=$.fn.Profile;
aG.fire(aG.EVENTS.FORM_CLOSED,aH)
}function a(aG){var aJ,aI,aH;
if(LI.Profile.accessibleAutofocus){aG.attr("tabindex","-1").focus()
}else{aJ=$(":input:visible:enabled:first",aG);
if(aJ.length){aJ.focus();
if(aJ.hasClass(r)){aJ.blur();
aJ.focus()
}aH=aJ.val();
aJ.val("").val(aH)
}}}function Y(aJ){var aM=aJ.success,aI=aJ.error,aK,aH=[],aL,aG;
if(aA||af||!au){if(aM){aM()
}return
}aK=$("#page-loading");
aK.show();
aL=av.slice(0);
aH=av.slice(0);
aG=["profile_v2_references"];
aH.push("profile_v2_toolbox_top");
aH.push("profile_v2_endorsements");
ap(au,aH,{success:function(aN){if(LI.profile.backgroundPayload&&LI.profile.backgroundPayload.content){$.extend(true,aN.responseText,LI.profile.backgroundPayload.content)
}az();
ak(aN,aL,function(){af=true;
if($.fn.ProfileEditToolbox){$.fn.ProfileEditToolbox.render(aN)
}ak(aN,aG,function(){},false,null,false);
if(aK){aK.hide()
}if(aM){aM()
}},true)
},error:function(){if(aK){aK.hide()
}if(aI){aI()
}}})
}function ak(aJ,aM,aN,aL,aK,aH){var aG=aM.length,aI=0;
LI.Profile2.Section.AddRenderListener(function(aO){if(aL!==true||++aI===aG){if(aN){aN()
}}});
LI.Profile2.Section.UpdateSectionsWithResponse(aJ,aM,null,aH)
}function az(){var aG={"certifications":"background-certifications","educations":"background-education","experience":"background-experience","honors":"background-honors","languages":"background-languages","organizations":"background-organizations","patents":"background-patents","projects":"background-projects","publications":"background-publications","scores":"background-test-scores","volunteering":"background-volunteering"};
for(var aH in aG){LI.Sortable.Region.setRegion(aH,aG[aH],null)
}}function W(aG){au=aG
}function V(){return au
}function Q(aG){aA=aG
}function B(aM){var aH=$(aM.target),aI,aJ,aL,aN="a[data-add-type]",aG="div.editable-item, li.editable-item",aK;
if(aH.closest(".save-exit-profile").length){aM.preventDefault();
i();
return
}if(aH.closest(".done-edit-profile").length){aM.preventDefault();
f();
return
}if(T.hasClass("active-edit")&&aH.closest("p.edit-tools, span.edit-tools, div.edit-tools, p.edit-section-promo").length){aM.preventDefault();
return
}if(aH.closest(aN).length){aM.preventDefault();
aH=aH.closest(aN);
aK=aH.attr("data-add-type");
aJ=$("#"+aK);
if(g(aH)){c()
}else{E(aJ)
}}else{if(aH.closest("a.edit-show-entire-section").length){aM.preventDefault();
aI=aH.closest("div.background-section");
aI=aI.find(".editable-item");
l(aI)
}else{if(aH.closest("a.edit-section, p.edit-section, span.edit-section").length){aM.preventDefault();
aI=aH.closest(aG);
l(aI)
}else{if(aH.hasClass("btn-cancel")){aM.preventDefault();
aI=aH.closest(aG);
if(aI.length){ag(aI)
}else{aI=aH.closest("div.profile-blank-form");
if(aI.length){b(aI)
}}}}}}aL=aH.closest("p.primary-profile-content");
if(aL.length&&aL.hasClass("expand-collapse")){aL.toggleClass("expand");
return
}}function ae(aG){if(z()){return LI.i18n.get("page-data-not-saved")
}}function d(aK){var aJ=$(aK.target),aG,aI=false,aH=$.fn.Profile;
if(aJ.length){if(aJ.attr("type")&&aJ.attr("type")==="checkbox"){aI=(aJ.is(":checked")!==aJ.get(0).defaultChecked)
}else{if(aJ.val()!==aJ.get(0).defaultValue){aI=true
}}if(aI){aG=$(aK.currentTarget).find("form").first();
aG.data(ay,true);
aH.fire(aH.EVENTS.FORM_MODIFIED)
}}}(function ah(){T.on("click",B);
N.delegate(".edit-form, .profile-blank-form","keyup change blur",d);
aa();
$(window).bind("beforeunload",ae);
var aH=$.fn.Profile,aG=aH.EVENTS;
aH.bind(aG.FORM_OPENED,O);
aH.bind([aG.FORM_CLOSED,aG.SWITCH_VIEW],P);
$.fn.ProfileEdit={setMapperBaseUrl:W,getMapperBaseUrl:V,hideAllForms:o,showSection:y,handleSaveSuccess:C,handleRemoveSuccess:ad,handleSaveFailure:u,handleSaveException:K,handleDoneEdit:f,showEditSections:Y,setIsFullLoad:Q,isPageDirty:z,disableEdit:O,getUpdatedTimestamp:F,setUpdatedTimestamp:v,setUpdatedProfileVersionTag:aB,setUpdatedPrivacySettingsVersionTag:H,showGlobalAlert:J};
var aI=N.attr("data-target-section");
if(aI){window.fs.after("profile_v2_background",function(){var aJ=$.fn.Profile.SECTION_IDS[aI];
if(aJ){setTimeout(function(){$.fn.ProfileEdit.showSection(aJ,true)
},10)
}})
}}())
});$(function(){var d,b="view-more",c="view-less";
function a(h){var f=$(h.target),g=isEducationClick=isProjectsClick=isPatentsClick=isPublicationsClick=false;
if(f.closest("#background-experience").length){g=true
}else{if(f.closest("#background-education").length){isEducationClick=true
}else{if(f.closest("#background-projects").length){isProjectsClick=true
}else{if(f.closest("#background-patents").length){isPatentsClick=true
}else{if(f.closest("#background-publications").length){isPublicationsClick=true
}else{if(f.closest(".view-more-bar").length){h.preventDefault();
d.find(".background-content").slideDown(500,function(){$(this).css({"height":"auto","overflow":"auto"})
});
d.removeClass(b);
d.addClass(c)
}else{if(f.closest(".view-less-bar").length){h.preventDefault();
d.find(".background-content").slideUp(300,function(){$(this).css({"height":"400px","overflow":"hidden"});
$(this).show();
$("html body").scrollTop($("#background").offset().top-80)
});
d.removeClass(c);
d.addClass(b)
}}}}}}}if(isProjectsClick||isPatentsClick||isPublicationsClick){if(f.closest(".associated-list dt").length){f.closest(".associated-list").toggleClass("associated-condensed")
}}else{if(g||isEducationClick){if(f.closest(".education-associated dt").length){$el=f.closest(".education-associated dt");
$el.find("span").toggleClass("closed");
$el.next("dd").toggleClass("closed");
trkCode=$el.attr("data-trk-code");
trkCodeAlt=$el.attr("data-trk-code-alt");
WebTracking.trackUserAction(trkCode);
$el.attr("data-trk-code",trkCodeAlt);
$el.attr("data-trk-code-alt",trkCode)
}}}}function e(){var f;
f=d&&d.length;
if(!f){d=$("#background");
if(d.length){d.find(".associated-list").each(function(g,h){if($(h).find(".associated-overflow").length){$(h).find("dt").css("cursor","pointer")
}});
d.on("click",a)
}}}$.fn.ProfileBackground={init:e};
e()
});$(function(){var d,z,k,c,K,t=15,o,h=false,w=false,b=true,I,p,s,j=-1,u=-1,m=false,g=false,x=3000,D=2000,q=x,i=D;
function y(){if(!b){return
}if(!w){e();
w=true
}F()
}function a(){if(!h){d=$(".right-fixed");
z=$(".insights");
k=$("#footer");
c=$("#ad-right-bottom");
K=$("iframe",c);
o=$("#header").outerHeight();
h=true
}}function L(){a();
if(!s&&z.length&&!z.is(":hidden")){s=z.offset().top
}}function F(){a();
var O=k.offset().top,Q,N,M,P,R;
if(I===true&&O===j){return
}j=O;
if(d.length&&z.length){N=z.height();
M=d.height();
if(!s||!N||!M){return
}s=z.offset().top;
if((s+N+M)>=j){I=true;
return
}else{d.removeClass("hidden");
I=false
}Q=$(document).scrollTop();
if((Q+o+M+t)>=j){H(d,M)
}else{if(!n()&&(Q+o)>=(s+N)){v(d);
if(g){A()
}}else{B(d)
}}if(!$.fn.ProfileAds.isFixedAdLoaded()){P=l(d);
R=$(window).height();
if(P&&P[1]>0&&P[1]<R){$.fn.ProfileAds.loadFixedAd();
u=Q;
m=false;
setTimeout(function(){m=true
},q?q:x)
}}}}function H(M,O){var N=l(k)[1];
M.css({top:((N-O-t)+"px"),position:"fixed"})
}function l(M){var N=M.offset(),O=$(window);
return[N.left-O.scrollLeft(),N.top-O.scrollTop()]
}function v(M){$("hr",M).first().hide();
M.css({top:((o+t)+"px"),position:"fixed"})
}function B(M){$("hr",M).first().show();
M.css({top:"auto",position:"absolute"})
}function A(){var M=$(document).scrollTop();
if(c&&K&&c.length&&K.length&&m&&u!==-1){if(!i){i=D
}if(u+i<M||M<u-i){K.attr("src",function(N,O){return O
});
u=M;
m=false;
setTimeout(function(){m=true
},q?q:x)
}}}function e(){$("> hr",d).remove();
$("<hr/>").insertBefore($("> div",d))
}function n(){if(p===undefined){p=(navigator.appVersion.indexOf("Mobile")!==-1)
}return p
}function E(){b=true
}function f(){b=false
}function J(M){g=M
}function r(M){q=M||x
}function G(M){i=M||D
}(function C(){var N=$.fn.Profile,M=N.EVENTS,O=$(window);
O.scroll(function(P){y(P)
});
O.load(function(){L()
});
N.bind(M.SWITCH_VIEW,E);
N.bind([M.SWITCH_EDIT,M.SWITCH_EDIT_ON_LOAD],f);
$.fn.RightFixed={setBottomAdRefreshEnabled:J,setBottomAdRefreshInterval:r,setBottomAdRefreshScrollPixel:G}
}())
});LI.define("Profile.DialogHelper");
LI.Profile.DialogHelper=function(c,d){d=$.extend({name:"",submitFormId:"",tmpl:"tl/apps/profile/v2/embed/dialog",width:"500",showProgress:true,beforeOpenHandler:null,additionalClass:"",content:{title:"",message:"",message2:"",submitButton:"",cancelButton:"",contentNode:""}},d);
var l=$(c),i="profile-dialog dialog-v2",g=null;
if(d.additionalClass){i+=" "+d.additionalClass
}function a(){var m=d.content;
m.showProgress=d.showProgress;
var n={name:d.name,type:"interrupt",className:i,width:d.width,scrollTopOnOpen:false,extra:d.extra,disableFocusOnClose:true};
if(d.content.contentNode){n.content={title:d.content.title,node:d.content.contentNode}
}else{n.content={title:d.content.title,dustTemplate:d.tmpl,dustData:m}
}return n
}function j(m){m.preventDefault()
}function f(m){g.close()
}function b(m){g.close()
}function h(){if(!dust.render){return
}var m=a();
g=new LI.Dialog();
g.beforeOpenEvent.subscribe(function(o,n){if(n[1]===m.name){$(document).bind("mousewheel DOMMouseScroll",j)
}if(d.beforeOpenHandler){d.beforeOpenHandler(o,n)
}});
g.closeEvent.subscribe(function(o,n){if(n[1]===m.name){$(document).unbind("mousewheel DOMMouseScroll",j)
}});
g.submitEvent.subscribe(function(q,n){if(n[1]===m.name){$(document).unbind("mousewheel DOMMouseScroll",j);
if(d.submitFormId){var p=LI.Controls.getControl(d.submitFormId,"FrontierAJAXForm");
if(p){p.addSuccessHandler(f);
p.addFailureHandler(b);
p.submitForm();
if(d.showProgress){var o=$("."+i);
o.addClass("in-progress");
o.find(".dialog-submit").attr("disabled","true")
}}}}});
g.open(m)
}function e(){l.on("click",function(m){m.preventDefault();
h()
})
}function k(){e()
}k();
return{showDialog:h}
};(function(c){var d=(typeof window.console!=="undefined")?window.console:{log:c.noop()};
LI.define("Profile2");
var a={"profile_v2_summary":"tl/apps/profile/v2/embed/summary_section","profile_v2_basic_info":"tl/apps/profile/v2/embed/basic_info","profile_v2_positions":"tl/apps/profile/v2/embed/experience_section","profile_v2_educations":"tl/apps/profile/v2/embed/education_section","profile_v2_additional_info":"tl/apps/profile/v2/embed/additional_info_section","profile_v2_headline":"tl/apps/profile/v2/embed/headline","profile_v2_headline_bi":"tl/apps/profile/v2/embed/headline_bi","profile_v2_name":"tl/apps/profile/v2/embed/name","profile_v2_name_bi":"tl/apps/profile/v2/embed/name_bi","profile_v2_contact_info":"tl/apps/profile/v2/embed/contact_info","profile_v2_location":"tl/apps/profile/v2/embed/location","profile_v2_location_bi":"tl/apps/profile/v2/embed/location_bi","profile_v2_badge":"tl/apps/profile/v2/embed/badge","top_card":"tl/apps/profile/v2/embed/top_card","p2_basic_info":"tl/apps/profile/v2/embed/p2_basic_info","profile_v2_summary_upsell":"tl/apps/profile/v2/embed/summary_view_upsell","profile_v2_honors":"tl/apps/profile/v2/embed/honors_section","profile_v2_courses":"tl/apps/profile/v2/embed/courses_section","profile_v2_test_scores":"tl/apps/profile/v2/embed/test_scores_section","profile_v2_certifications":"tl/apps/profile/v2/embed/certification_section","profile_v2_organizations":"tl/apps/profile/v2/embed/organizations_section","profile_v2_patents":"tl/apps/profile/v2/embed/patents_section","profile_v2_publications":"tl/apps/profile/v2/embed/publications_section","profile_v2_volunteering":"tl/apps/profile/v2/embed/volunteering_section","profile_v2_projects":"tl/apps/profile/v2/embed/projects_section","profile_v2_endorsements":"tl/apps/profile/v2/embed/endorsements","profile_v2_references":"tl/apps/profile/v2/embed/references","profile_v2_skills":"tl/apps/profile/v2/embed/skills_section","profile_v2_languages":"tl/apps/profile/v2/embed/languages_section"};
var b={"top_card":["p2_basic_info","profile_v2_badge"]};
LI.Profile2.Section=function(e){this._config=c.extend({},e);
this._$container=this._getContainer()
};
c.extend(LI.Profile2.Section,{UpdateSectionsWithResponse:function(j,p,e,m){var o,f=[],i="X-FS-Template-Keys",k="x-fs-template-keys",g="X-Fs-Template-Keys",h,l=c.Deferred(),n=l.promise();
if(!(j&&j.getResponseHeader)){return
}h=j.getResponseHeader;
o=h[i]||h[k]||h[g];
if(!p&&o){c.each(o.split(","),function(r,q){f.push(q.substring(q.indexOf("=")+1))
})
}else{c.each(p,function(q,r){if(a[r]){f.push(a[r])
}})
}if(m!==false){LI.Profile2.Render.getFizzyHeaderConcatTemplates(j,function(){LI.Profile2.Section._UpdateTemplatesWithData(j.responseText,f,e);
l.resolve()
})
}else{LI.Profile2.Section._UpdateTemplatesWithData(j.responseText,f,e);
l.resolve()
}return n
},UpdateSectionsFromServer:function(g,m,j){var f=c.Deferred(),k="x-a="+m.join(","),l=c.Deferred();
for(var h=0,e=m.length;
h<e;
h++){if(b[m[h]]){k+=","+b[m[h]].join(",")
}}g+=((g.indexOf("?")===-1)?"?":"&")+k;
LI.asyncRequest("GET",g,{success:function(i){f.resolve(i)
},custom:{exception:function(){f.reject();
return false
}}});
f.promise().done(function(i){var n=LI.Profile2.Section.UpdateSectionsWithResponse(i,m,j);
n.done(function(){l.resolve()
})
});
return l.promise()
},AddRenderListener:function(e){LI.Profile2.Section._RenderListeners.add(e)
},RemoveRenderListener:function(e){LI.Profile2.Section._RenderListeners.remove(e)
},_UpdateTemplatesWithData:function(h,e,g){var f=LI.Profile2.Section._Sections;
c.each(e,function(j,k){var l;
if(!f[k]){f[k]=new LI.Profile2.Section({templatePath:k,$sectionParent:g})
}l=f[k].render(h);
if(!l){return
}l.done(function(){LI.Profile2.Section._RenderListeners.fire(k.substring(k.lastIndexOf("/")+1))
})
})
},_Sections:{},_RenderListeners:c.Callbacks()});
c.extend(LI.Profile2.Section.prototype,{render:function(h){var g=this,e=c.Deferred(),f;
if(!dust){d.log("Dust is needed in order to render this section.");
return
}if(!dust.cache[this._config.templatePath]){d.log("Could not render section template: ",this._config.templatePath);
return
}dust.render(this._config.templatePath,h,function(j,i){if(j){d.log(j);
e.reject();
return
}if(g._$container.closest("html").length===0){g._$container=g._getContainer()
}if(g._$container.length===0){if(!g._config.$sectionParent){e.reject();
return
}g._config.$sectionParent.append(i)
}else{g._$container.replaceWith(i)
}g._$container=g._getContainer();
LI.Controls.parseFragment(g._$container.parent().get(0));
e.resolve()
});
return e
},getAliasTemplate:function(e){return(a.hasOwnProperty(e))?a[e]:null
},_getContainer:function(){var f=this._config.templatePath,e=f.substring(f.lastIndexOf("/")+1);
return c(document.body).find("div[data-li-template="+e+"]")
}})
}(jQuery));LI.define("ProfileSectionSkills");
LI.ProfileSectionSkills=function(I,A){var m="ToggleEndorsementVisibility",b="hide_endorsement",a="unhide_endorsement",c="endorser-dlg-loading",e="endorse-item",B="see-all-endorsers",k="endorse-count",h="data-endorsed-item-name",j="blocked",l="blockedAction",w="blockedReason",q="actionLimitExceeded",f="endorsing",K="unendorsing",D=false,J=false,t={},d;
A={templateName:A.templateName||null,dataURL:A.dataURL||null,endorseURL:A.endorseURL,unendorseURL:A.unendorseURL,endorsementData:A.endorsementData,isActionAllowed:!!(A.endorseURL&&A.unendorseURL&&A.endorsementData),isSelf:A.isSelf===true?true:false,isEdit:A.isEdit===true?true:false,hideURL:A.hideURL,unhideURL:A.unhideURL,maxEndorsementCount:A.maxEndorsementCount,dialogConfig:A.dialogConfig||null,viewerId:A.viewerId,facePilePicsAjaxUrl:A.facePilePicsAjaxUrl||null,facePileEndorserIds:A.facePileEndorserIds||null,distance:A.distance,enableEndorseCountAction:((typeof A.enableEndorseCountAction==="undefined")?true:A.enableEndorseCountAction),i18nMaxEndorsements:A.i18nMaxEndorsements,i18nEndorseLimitExceeded:A.i18nEndorseLimitExceeded,i18nUnendorseLimitExceeded:A.i18nUnendorseLimitExceeded};
function G(){if(A.dataURL&&A.templateName){p()
}else{y()
}if(A.facePilePicsAjaxUrl&&A.facePileEndorserIds){YEvent.on(window,"load",function(){v();
$.fn.Profile.bind($.fn.Profile.EVENTS.SKILLS_SECTION_RENDERED,v)
})
}if(LI.MediatorFactory){LI.MediatorFactory.create(m).createEvent(b).subscribe(n);
LI.MediatorFactory.create(m).createEvent(a).subscribe(n)
}}function p(){LI.asyncRequest("GET",A.dataURL,{success:function(L){if(L.responseText!==""){dust.render(A.templateName,L.responseText,function(N,M){if(!N){I.innerHTML=M;
LI.Controls.parseFragment(I);
y()
}})
}},custom:{exception:function(L){return false
}}})
}function y(){var L=YDom.get("promote-endorsing");
d=LI.Controls.getControl("promote-endorsing","LI.PostitActions");
if(A.isActionAllowed){YEvent.on(Y$(".endorse-button",I),"click",C)
}if(A.isSelf){}YEvent.on(I,"click",function(N){var M=YEvent.getTarget(N);
if((A.enableEndorseCountAction&&(YDom.hasClass(M,k)||YDom.getAncestorByClassName(M,k)))||YDom.hasClass(M,B)||YDom.getAncestorByClassName(M,B)){YEvent.preventDefault(N);
u(M)
}});
if(L&&d){YEvent.on(L,"click",function(M){if(YDom.hasClass(YEvent.getTarget(M),"close-action")){d.close();
d=null
}})
}}function v(){LI.asyncRequest("GET",A.facePilePicsAjaxUrl,{success:H,custom:{exception:function(L){return false
}}})
}function H(M){var U,S,V,Q,T,O,P=[],L=M.responseText,N=A.facePileEndorserIds.length,R;
if(L&&L.pictureUrlsMpr&&L.pictureUrlsMpr.urls){O=L.pictureUrlsMpr.urls;
for(U=0;
U<N;
U++){T=[];
V=A.facePileEndorserIds[U];
R=V.length;
for(S=0;
S<R;
S++){T.push(O[V[S]])
}P.push(T)
}Q=O[A.viewerId];
F(P,Q)
}}function F(O,P){var T,S,V,R,L,X,W,U=Y$("#profile-skills .skills-section")[0],M=YDom.getChildren(U),N=M.length,Q;
for(T=0;
T<N;
T++){L=M[T];
X=Y$("img",L);
Q=X.length;
R=YDom.hasClass(L,"endorsed-by-viewer");
for(S=0;
S<Q;
S++){if(O[T][S]){if(A.distance===1){V=R?X[S]:X[S+1]
}else{V=X[S]
}if(V){V.src=O[T][S]
}}}}if(P){W=Y$(".viewer-pic",U);
YDom.setAttribute(W,"src",P)
}}function C(L){YEvent.preventDefault(L);
if(d){d.close();
d=null
}o(YDom.getAncestorByClassName(YEvent.getTarget(L),e))
}function s(M){var N=YDom.hasClass(M,"endorsed-by-viewer"),L=r(M,(N?-1:1));
if(N){YDom.replaceClass(M,"endorsed-by-viewer","endorsable")
}else{YDom.replaceClass(M,"endorsable","endorsed-by-viewer")
}return !N
}function i(R,S,M){var L=YAHOO.lang.merge(A.endorsementData,LI.getDataSet(R,true)),N=["endorsementCount=1"],M=M||0,Q="-"+M+"=",P;
for(var O in L){if(O&&YAHOO.lang.hasOwnProperty(L,O)){P=O.indexOf("li-")===0?O.slice(3):O;
N.push(P+Q+encodeURIComponent(L[O]))
}}return N.join("&")
}function o(N){var O,L,M;
if(!N||YDom.hasClass(N,"action-pending")||YDom.hasClass(N,"endorse-action-taken")){return
}YDom.addClass(N,"action-pending");
O=s(N);
if((O&&D)||(!O&&J)){s(N);
E((O)?f:K);
g(N);
return
}L=i(N,O);
M=O?A.endorseURL:A.unendorseURL;
LI.asyncRequest("POST",M,{success:function(P){var R=P.responseText,S=YDom.getAttribute(N,h),T=R&&R[S]&&O?R[S].endorsementID:"",Q,U,V;
if(A.distance!==1&&!O){Q=Y$(".endorse-button",N,true);
U=Q&&Q.parentElement;
V=Y$(".hr-line",N,true);
if(V){U.appendChild(V)
}U.removeChild(Q)
}N.setAttribute("data-endorsement-id",T);
x(N,O,T);
g(N)
},custom:{error:function(P){var Q=P&&P[j];
if(Q&&(Q[w]===q)){s(N);
E(Q[l])
}g(N)
},exception:function(){g(N)
}}},L)
}function g(L){YDom.removeClass(L,"action-pending");
return false
}function z(N){var M=YDom.getAncestorByClassName(this,e),L=new YUtil.Point(N.pageX,N.pageY);
if(YDom.getRegion(this).contains(L)===false){YEvent.removeListener(this,"mouseout",z);
YDom.replaceClass(this,"endorse-action-taken","endorsed-by-viewer")
}}function u(P){var T=YDom.getAncestorByClassName(P,e),O=T?YDom.getAttribute(T,h):"",S=Y$(".num-endorsements",T,true),N=parseInt(S.getAttribute("data-count"),10),M={},U=[],R,L,Q=t[O];
if(WebTracking){WebTracking.trackUserAction("endorsers_info_dialog_open")
}if(YDom.hasClass(T,c)||!O){return
}if(Q&&!Q.dirty){LI.Dialog().open(Q.config);
return
}YDom.addClass(T,c);
L=LI.addParams("",{recipientId:A.endorsementData.recipientId,skillName:encodeURIComponent(O)},true);
LI.asyncRequest("POST",A.dialogConfig.dustDataUrl,{success:function(aa){var V=aa.responseText,W,Y,X,Z;
if(V!==""){Y=YJson.parse(YJson.stringify(A.dialogConfig));
X=Y.content;
if(A.isSelf){if(A.isEdit){Z=V.endorser_info_edit_dialog
}else{Z=V.endorser_info_dialog
}Z.isSelf=A.isSelf;
Z.skillName=O
}X.dustData=V;
W=new LI.Dialog();
if(A.isSelf){W.beforeOpenEvent.subscribe(function(ad,ab){if(ab[1]===Y.name){var ac=YDom.get("dialog-wrapper");
if(ac){LI.Controls.parseFragment(ac)
}}})
}W.open(Y);
t[O]={config:Y,skillItem:T,dirty:false}
}YDom.removeClass(T,c)
},custom:{exception:function(V){YDom.removeClass(T,c);
return false
}}},L)
}function n(Q){var O=Q.hideItemName,W=Q.hideEndorserId,L=Q.isHidden,U=t[O].config,S=U.content.dustData["endorser_info_dialog"].endorsers,R,V=t[O].skillItem,N=Y$(".endorsers-pics li[data-endorser-id="+W+"]",V,true),T;
for(var P=0,M=S.length;
P<M;
P++){R=S[P];
if(R.memberID===W){R.isHidden=L;
break
}}T=r(V,L?-1:1);
if(N&&L){LI.fade(N)
}}function r(O,L){var N=Y$(".num-endorsements",O,true),M=(parseInt(N.getAttribute("data-count"),10)||0)+L;
N.setAttribute("data-count",M);
N.innerHTML=M>A.maxEndorsementCount?A.i18nMaxEndorsements:M;
if(M){YDom.replaceClass(O,"no-endorsements","has-endorsements")
}else{YDom.replaceClass(O,"has-endorsements","no-endorsements")
}return M
}function x(N,U,S){var P=YDom.getAttribute(N,h),R=t[P],Q,O={},M,T,L;
if(R){R.dirty=true
}}function E(M){var N="",L="",P="prof-endrs-skills-limit-",O=Y$("#skills-error-alert")[0];
if(M===f){D=true;
L="endorse";
N=A.i18nEndorseLimitExceeded
}else{if(M===K){J=true;
L="unendorse";
N=A.i18nUnendorseLimitExceeded
}}if(window.WebTracking){WebTracking.trackUserAction(P+L)
}if(N){if(LI.GlobalAlertManager){LI.injectAlert({type:"error",message:N,dismissable:true})
}else{LI.injectAlert(N,"error",O,false,true)
}}}G()
};(function(a){LI.define("Profile2");
var b=(typeof window.console!=="undefined")?window.console:{log:a.noop()};
LI.Profile2.Render=(function(){var c={};
function e(j,i,f,h){var g;
if(typeof j.responseText==="string"){g=a.parseJSON(j.responseText)
}else{g=j.responseText
}if(g.content){g=g.content
}dust.render(i,g,function(l,k){if(l){b.log(l);
if(h){h(l)
}return
}if(f){f(k)
}})
}function d(g,i){var h,f;
if(typeof g.getResponseHeader==="function"){f=g.getResponseHeader(i)||""
}else{h=g.getResponseHeader||{};
if(h.hasOwnProperty(i)){f=h[i]
}}return f
}a.extend(c,{render:function(j){var h=j.response||{},i=j.template||"",f=j.success,g=j.error;
if(h&&i){this.getFizzyHeaderConcatTemplates(h,function(){e(h,i,f,g)
})
}},getFizzyHeaderConcatTemplates:function(g,l){if(!g){return
}var j="X-FS-TL",i="x-fs-tl",h="X-Fs-Tl",f=[],k;
k=d(g,j)||d(g,i)||d(g,h);
if(k){a.ajaxSetup({cache:true});
a.each(k.split(","),function(m,n){f.push(a.getScript(a.trim(n)))
});
a.ajaxSetup({cache:false});
if(l){a.when.apply(null,f).done(function(){l()
})
}}else{if(l){l()
}}}});
return c
})()
})(jQuery);(function(c){var d=window.jQuery||c("jquery"),b=b||{},a=LIModules.imports("Controls");
b.AsyncRunner=(function(){var H=[],q=[],h=1,e=2,f=5000,v=3000,x=2000,D=0,n,g=0,i=false,C=false;
var l=function(){this.$done=new d.Deferred();
this.$defer=d.Deferred()
};
var y=function(K,I){l.call(this);
var J=this;
this.$callback=d.Callbacks("memory");
this.$callback.add(function(){if(I){K.call(I)
}else{K()
}});
this.$defer.done(function(){J.$callback.fire();
J.$done.resolve()
});
return
};
var F=function(I){l.call(this);
var K=this,J=(d.isArray(I)&&I.length)?I[0]:I;
this.$defer.done(function(){o(J,function(L){K.$done.resolve(L)
})
});
return
};
function o(J,K){var I=document.createElement("script");
I.type="text/javascript";
I.src=J;
if(I.readyState){I.onreadystatechange=function(){if(I.readyState==="loaded"||I.readyState==="complete"){I.onreadystatechange=null;
K(I)
}}
}else{I.onload=function(){K(I)
}
}document.body.appendChild(I)
}function k(){d.each(q,function(J,I){I.$callback.disable()
});
clearTimeout(n);
return
}function w(){d.each(q,function(J,I){I.$callback.empty()
});
q=[];
return
}function G(){B();
m()
}function B(){var I=[];
if(H.length){d.each(H,function(K,J){I.push(J.$done)
});
d.when.apply(d,I).done(function(){a.processQueue()
});
d.each(H,function(K,J){J.$defer.resolve()
})
}}function m(){var I=d.now();
n=null;
if(I-D<v){g++;
E()
}else{g=0;
s();
if(q.length){n=setTimeout(G,f)
}}}function E(){setTimeout(G,Math.pow(x,g-1))
}function u(){d(document).click(function(I){D=d.now()
})
}function s(){var I;
if(q.length){I=q.shift();
I.$defer.resolve()
}return
}function p(J,I){if(!d.isFunction(J)){return
}var K=t(J,I,h);
return K
}function r(I,J){var K=null;
if(d.isArray(I)&&I.length){I=I[0]
}if(I){K=t(I,J,e)
}return K
}function j(I){if(C){I.$defer.resolve()
}else{H.push(I)
}}function A(I){q.push(I);
if(!n){n=setTimeout(G,f)
}}function t(P,K,L){var I=K||{},N=(I.immediate!==false),O,M,J;
if(!i){z()
}if(h===L){M=new y(P,I.context)
}else{if(e===L){M=new F(P)
}}if(M){O=M.$done.promise();
if(N){j(M)
}else{A(M)
}}return O
}function z(){u();
i=true
}d(window).load(function(){C=true;
setTimeout(function(){G()
},100)
});
return{addFunction:p,addScript:r}
})();
LIModules.exports("Profile.AsyncRunner",b.AsyncRunner)
}(window.require));LI.define("WebTrackClickTracking");
LI.WebTrackClickTracking=function(c,b){this.config=b;
function a(e){var g=YEvent.getTarget(e).id,f=this.config.trackingInfo,d=YAHOO.lang;
if(!d.isNull(f[g])&&!d.isUndefined(f[g])){WebTracking.trackUserAction(f[g].trackingCode,"",true)
}}if(WebTracking){YEvent.on(c,"click",a,null,this)
}};LI.define("WaffleTracking");
LI.WaffleTracking=function(){var a=this;
YEvent.on(document,"click",function(d){var c=YEvent.getTarget(d),b;
try{do{b=LI.getDataAttribute(c,"trk-code");
if(b&&WebTracking){WebTracking.trackUserAction(b,a.getParamsList(c),true)
}}while(c=LI.getAncestorByDataAttribute(c,"li-trk-code"))
}catch(d){}})
};
LI.WaffleTracking.prototype.getParamsList=function(a){return{}
};
LI.define("waffleTracking");
LI.waffleTracking=new LI.WaffleTracking();LI.define("FollowToggler");
LI.FollowToggler=(function(){var i="followee",l="is-following",e="",g="",r,m,o="loading",q="changed",c="href",d="follow",s="unfollow",n="action-"+d,j="action-"+s;
function k(u,t){var v=(u&&u.id)||(new Date()).getTime();
if(!t.disabled){i=t.toggleContainerClass||i;
l=t.toggleClass||l;
e=t.actionClassSuffix||e;
g=t.selectedClass||g;
YEvent.on(u,"click",h);
r=new YAHOO.util.CustomEvent(q+v);
return{change:r}
}}function h(u){var v=YEvent.getTarget(u),t=true;
if(g&&v.tagName&&v.tagName!=="A"){v=YDom.getAncestorByTagName(v,"a")
}if(YDom.hasClass(v,n+e)){b(v)
}else{if(YDom.hasClass(v,j+e)){p(v)
}else{t=false
}}if(t){YEvent.preventDefault(u)
}}function a(u){var t=u.match(/(followee|memberId|channels)[=|\/](\d+)/i),v=null;
if(t&&!!t.length){v=t[2]||null
}return v
}function f(t,v,u){LI.asyncRequest(v||"GET",t,{success:u.success,failure:u.failure,custom:{exception:u.failure,error:u.failure}})
}function b(v){var t=YDom.getAttribute(v,c),u=YDom.getAncestorByClassName(v,i),w=a(t);
if(!t){return
}YDom.addClass(u,o);
f(t,"POST",{success:function(x){YDom.removeClass(u,o);
YDom.addClass(u,l);
if(g){m=Y$("."+j,u);
YDom.removeClass(v,g);
YDom.addClass(m,g)
}r.fire(d,{success:true,id:w})
},failure:function(){YDom.removeClass(u,o);
r.fire(d,{success:false,id:w})
}})
}function p(v){var t=YDom.getAttribute(v,c),u=YDom.getAncestorByClassName(v,i),w=a(t);
if(!t){return
}YDom.addClass(u,o);
f(t,"POST",{success:function(x){YDom.removeClass(u,o);
YDom.removeClass(u,l);
if(g){m=Y$("."+n,u);
YDom.removeClass(v,g);
YDom.addClass(m,g)
}r.fire(s,{success:true,id:w})
},failure:function(){YDom.removeClass(u,o);
r.fire(s,{success:false,id:w})
}})
}return k
}());(function(f){var c=f.requires("jquery"),b=f.requires("BaseControl"),h=f.requires("underscore"),i=f.requires("Events"),j="dropdown:open",a="dropdown:close",d="dropdown:newitems",e="li-dropdown",g=b.extend(function(k){var r="click",l="mouseover",x="mouseout",q="focusin",u="focusout",w="mouseup",n="hover",p="keydown",o=13,m=27,t=32,y=38,v=40,s={activeClass:"active",eventType:r,mercyTime:400,triggerSelector:null,dropdownMenuClass:"dropdown",focusClass:null};
return{beforeDecoration:function(){this._$document=c(document);
this._mouseoutTimer=0;
this._config=c.extend({},s,this._config);
this._isOpen=false;
this._$listItems=[];
this._$trigger={};
this._$dropMenu={};
this._currentItemIndex=-1;
this.isMouseEvent=false;
if(this._config.triggerSelector){this._$trigger=this._$el.find(this._config.triggerSelector)
}else{this._$trigger=this._$el.children("a");
if(this._$trigger.length===0){this._$trigger=this._$el.children("button")
}}this._isLegalEl=this._$trigger.length?this._$trigger.is('a, button, input[type="button"]'):false;
this._$dropMenu=this._$trigger.next();
this._populateListItems();
this._bootstrapAria()
},attachEventListeners:function(){if(this._config.eventType===n){this._$el.on(l,this._handleMouseOverEvent).on(x,this._handleMouseOutEvent)
}this._$trigger.on(r+"."+e,this._handleClickEvent).on(w,h.bind(this._setMouseUser,this,true));
this._$el.on(p,this._handleKeyEvent);
if(this._config.focusClass){this._$el.on(q,this._handleElFocusInEvent).on(u,this._handleElFocusOutEvent)
}i.on(d,this.bootstrapNewItems);
this._fixJawsInIE()
},_bootstrapAria:function(){this._$trigger.attr({"tabindex":0,"aria-haspopup":true,"role":"button","aria-expanded":false});
this._bootstrapListItems();
this._$dropMenu.attr("tabindex",-1);
if(this._$listItems.length){this._$dropMenu.attr("role","menu")
}},_bootstrapListItems:function(){this._$listItems.attr("tabindex",0)
},bootstrapNewItems:function(z){this._populateListItems();
this._bootstrapListItems()
},_setMouseUser:function(z){this.isMouseEvent=z
},_populateListItems:function(){this._$listItems=this._$dropMenu.find("li, dd, dt")
},_handleBodyClick:function(z){if(this._isOpen&&this._$el.has(z.target).length===0){this._setMouseUser(true);
this.close()
}},_focusNext:function(){var z=this._$listItems.length;
if(z){if(this._currentItemIndex<(z-1)){this._currentItemIndex++
}else{this._currentItemIndex=0
}this._$listItems[this._currentItemIndex].focus()
}},_focusPrevious:function(){var z=this._$listItems.length;
if(z){if(this._currentItemIndex>0){this._currentItemIndex--
}else{this._currentItemIndex=(z-1)
}this._$listItems[this._currentItemIndex].focus()
}},_handleKeyEvent:function(z){var A=z.which,B=z.target;
switch(A){case o:if(!this._isLegalEl&&c(B).is(this._$trigger)){this._$trigger.click()
}break;
case t:if(!this._isLegalEl&&c(B).is(this._$trigger)){z.preventDefault();
this._$trigger.click()
}break;
case m:if(this._isOpen){this.close()
}break;
case v:z.preventDefault();
this._focusNext();
break;
case y:z.preventDefault();
this._focusPrevious();
break;
default:break
}},open:function(z){var A=this._config.activeClass;
if(!this._isOpen){this._$el.addClass(A);
this._$trigger.attr("aria-expanded",true);
if(!this.isMouseEvent){this._$dropMenu.focus()
}this._$el.trigger(j,this);
this._isOpen=true;
if(z!==e){this._$document.on(r,this._handleBodyClick)
}}},close:function(z){if(this._isOpen){this._$el.removeClass(this._config.activeClass);
this._$trigger.attr("aria-expanded",false);
if(this._mouseoutTimer){window.clearTimeout(this._mouseoutTimer)
}if(!this.isMouseEvent){this._$trigger.focus()
}this._$el.trigger(a,this);
this._isOpen=false;
this._currentItemIndex=-1;
this._setMouseUser(false);
if(z!==e){this._$document.off(r,this._handleBodyClick)
}}},_handleElFocusInEvent:function(z){this._$el.addClass(this._config.focusClass)
},_handleElFocusOutEvent:function(z){this._$el.removeClass(this._config.focusClass)
},_handleClickEvent:function(z){var A;
if(this._config.eventType===n){A=z.target.href;
if(A&&A.indexOf("#")!==0){return
}}z.preventDefault();
z.stopPropagation();
if(this._isOpen){this.close(z.namespace)
}else{this.open(z.namespace)
}},_handleMouseOverEvent:function(z){this._setMouseUser(true);
window.clearTimeout(this._mouseoutTimer);
this.open()
},_handleMouseOutEvent:function(z){var B=this._config.mercyTime,A=this;
if(B>0){this._mouseoutTimer=window.setTimeout(function(){A.close()
},B)
}else{A.close()
}},_fixJawsInIE:function(){var B="hasIEJawsFix",z=50,A;
if(document.msElementsFromPoint&&!this._$document.data(B)){A=this._$document;
A.on(r+"."+e,function(D){var H=A.scrollTop(),C=D.clientX,J=D.clientY,G=[],I=false,E,F;
if(H>=z&&J<=z){G=document.msElementsFromPoint(C,J);
c.each(G,function(K,L){E=c(L);
if(E.is('button, [role="button"]')&&E.is('[aria-haspopup="true"]')){if(K>0){E.trigger(r+"."+e);
I=true
}return false
}});
if(I&&G.length){F=c(G[0]);
if(F.is("a")&&F.attr("href")&&F.attr("href")!=="#"){D.preventDefault()
}}}});
A.data(B,true)
}}}
});
g.EVENTS={OPEN:j,CLOSE:a,NEW:d};
f.exports("Dropdown",g)
}(window.LIModules));(function(){var a=LIModules.imports("HopscotchTourRunner"),b;
b=function(d,e){var m="keyup",i=27,f={showOn:"click",orientation:"top",target:d,showNumber:false,xOffset:0,yOffset:0,arrowOffset:0,zIndex:null,width:null,ctaLabel:null,ctaOnClick:null,onShow:null,onClose:q,openOnLoad:false,isRtl:false},s,j=$(d),r;
function h(){if(typeof a==="object"){return a.loadHopscotch()
}else{if(typeof window.hopscotch==="object"){return $.Deferred().resolve()
}else{return $.Deferred().reject()
}}}e=$.extend(true,f,e);
s={id:e.id,title:e.title,content:e.content,orientation:e.orientation,target:e.target,showNumber:e.showNumber,xOffset:e.xOffset,yOffset:e.yOffset,zindex:e.zIndex,width:e.width,bubblePadding:0,showCTAButton:!!e.ctaLabel,ctaLabel:e.ctaLabel,onCTA:e.ctaOnClick,onShow:e.onShow,onClose:e.onClose,arrowOffset:e.arrowOffset,isRtl:e.isRtl,showOn:e.showOn};
function o(){var t=LIModules.imports("Bidi");
if(!s.isRtl&&t){t.applyWhenRTL(function(){s.isRtl=true
})
}}function p(t){t.attr("tabindex",-1).focus()
}function l(){j.focus()
}function k(){j.attr("aria-haspopup",true)
}function c(){r.off(m)
}function q(){if(window.hopscotch){hopscotch.getCalloutManager().removeAllCallouts()
}c();
l()
}function g(){r.on(m,function(t){if(t.keyCode===i){e.onClose()
}})
}function n(t,v){var u=null;
if(t){t.stopPropagation()
}h().then(function(){u=hopscotch.getCalloutManager();
u.removeAllCallouts();
if(v){s.target=t.currentTarget
}o();
u.createCallout(s);
r=$(u.getCallout(s.id).element);
p(r);
g()
})
}this.open=function(t,w,v){function u(){if(a.isTourRunning()){return
}n(t,w)
}if(v){n(t,w)
}else{u()
}};
this.close=function(){e.onClose()
};
h();
k();
if(e.openOnLoad){this.open()
}else{$(d).on(e.showOn,n)
}};
LIModules.exports("HopscotchCallout",b)
}());(function(){LI.define("SlideshareViewer");
var a="width",d="height",c="max",b={width:d,height:a};
LI.SlideshareViewer=function(g,e){e||(e={});
var f={iframe:function(){var i;
e.constraint||(e.constraint=a);
e.toolbarHeight||(e.toolbarHeight=30);
if(e.aspectRatio){h(e.aspectRatio)
}else{if(e.aspectRatioEl){i=YDom.get(e.aspectRatioEl);
if(i.height&&i.width){h(i.width/i.height)
}else{i.onload=function(){if(this.height&&this.width){h(this.width/this.height)
}}
}}}},img:function(){var i=g.src.replace("-large","-original");
YEvent.on(g,"click",function(){window.open(i)
})
}};
if(g&&g.tagName&&f.hasOwnProperty(g.tagName.toLowerCase())){f[g.tagName.toLowerCase()]()
}function h(k){if(!isNaN(k)&&!(e.rejectTinyAspectRatio&&k<e.minAspectRatio)){k=Math.max(k,e.minAspectRatio||0);
var m={},j=e.constraint,l=b[j],i=e[j]||g[j];
m[j]=Math.min(i,e[c+j]||Infinity);
m[l]=m[j]*Math.pow(k,(j===a?-1:1));
if(e[c+l]&&m[l]>e[c+l]){m[l]=e[c+l];
m[j]=m[l]*Math.pow(k,(l===a?-1:1))
}if(m.width&&m.height){m={width:Math.floor(m.width),height:Math.floor(m.height)+e.toolbarHeight};
g.width=m.width;
g.height=m.height;
g.style.width=m.width+"px";
g.style.height=m.height+"px"
}}}}
})(undefined);(function(){var a=/profile_lnl_dialog/,b=/\?trk=(\w+)/;
LI.Dialog().beforeOpenEvent.subscribe(function(d,e){if(a.test(e[1])){WebTracking.trackUserAction((c(e[0])),"")
}});
function c(d){return b.exec($(d).attr("href"))[1]
}})();(function(){var c="active",a="loading";
function d(p,k){var m=YEvent.getTarget(p),f=k&&k.parentClass||"people-follow",o=YDom.getAncestorByClassName(m,f),n=k&&k.enableFollowerCount,g,h,i=0,q={success:j,failure:l,custom:{error:l,exception:l},scope:this};
function j(s){var r=YDom.hasClass(o,c);
if(s.statusText&&s.statusText==="OK"){if(n){h=Y$(k.followerCountSelector,null,true);
if(h){i=b(h.innerHTML);
if(r){i-=1
}else{i+=1
}h.innerHTML=LI.numberFormat(Math.max(0,i))
}}LI.toggleClass(o,c);
YDom.removeClass(o,a)
}}function l(){YDom.removeClass(o,a)
}YEvent.preventDefault(p);
m=(m.nodeName.toUpperCase()==="A")?m:YDom.getAncestorByTagName(m,"a");
g=m&&m.href;
if(g){LI.asyncRequest("GET",g,q);
YDom.addClass(o,a)
}}function b(g,f){var h=parseInt(g.replace(/\D/g,""),10);
return isNaN(h)?f||0:h
}function e(g,f){YEvent.on(g,"click",d,f,this)
}e.prototype={toggleSelection:function(f){}};
LI.PeopleFollow=e
})();(function(){var a=LIModules.requires("BaseControl"),c=LIModules.imports("Bidi"),e=LIModules.requires("jquery"),b=LIModules.requires("underscore");
var d=a.extend(function(l){var v,F,j,u,g,y,h,D,B,s,r="animated",x="auto",A="body",p="id",w="shown",m="pending",k=e(document),C=e(window),t=50,f=250,i=5,o=0,E=null,n=true,z=false;
h={MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",FOCUS:"focus",BLUR:"blur",KEYDOWN:"keydown"};
D={ESCAPE:27};
j={animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oanimationend"};
u={DESCRIBED_BY:"aria-describedby",ROLE:"role",TABINDEX:"tabIndex"};
y={BOTTOM:"bottom",TOP:"top",RIGHT:"right",LEFT:"left"};
v={TOP:"fade-in-down",BOTTOM:"fade-in-up",RIGHT:"fade-in-left",LEFT:"fade-in-right"};
B={TOOLTIP:"tooltip",OVERLAY:"tooltip-overlay",CONTENT:"tooltip-content",ARROW:"tooltip-arrow",CONTAINER:"tooltip-content-container"};
s={TOOLTIP_ALREADY_SHOWING:"Tooltip already showing.",TOOLTIP_CLOSED_BEFORE_FULLY_OPENED:"Tooltip closed before it fully opened.",USER_INTERACTING_TOOLTIP:"User is interacting with tooltip.",USER_MOUSEOUT:"User is no long hovering."};
g={delayOpen:t,delayClose:f,doAnimate:n,direction:y.BOTTOM,isFlippable:n,offsetExtra:i,offsetX:o,offsetY:o,type:B.TOOLTIP,width:x,tooltipContentID:E,dependencies:["scripts/shared/Bidi"],cssDependencies:["css!scss/modules/tooltip"]};
function q(){var H=document.body;
for(var G in j){if(typeof H.style[G]!=="undefined"){return j[G]
}}}F=q();
return{beforeDecoration:function(){var G=this._$el;
this._config=b.defaults(this._config,g);
if(b.isUndefined(G.attr(u.TABINDEX))){G.attr(u.TABINDEX,0)
}},attachEventListeners:function(){this._$el.on(h.MOUSEOVER+" "+h.FOCUS,this._setTriggerMouseover).on(h.MOUSEOUT+" "+h.BLUR,this._removeTriggerMouseover)
},_attachTooltipListeners:function(){this.$overlay.on(h.MOUSEOVER,this._setTooltipMouseover).on(h.MOUSEOUT,this._removeTooltipMouseover)
},_attachOpenListeners:function(){k.on(h.KEYDOWN,this._closeIfEscapeKey)
},_setTriggerMouseover:function(){this.isMouseoverTrigger=n;
this.open()
},_removeTriggerMouseover:function(){this.isMouseoverTrigger=z;
this.close()
},_setTooltipMouseover:function(){this.isMouseoverTooltip=n
},_removeTooltipMouseover:function(){this.isMouseoverTooltip=z;
this.close()
},_closeIfEscapeKey:function(G){if(G.which===D.ESCAPE){this._hideTooltip()
}},detachEventListeners:function(){this._$el.off(h.MOUSEOVER+" "+h.FOCUS,this._setTriggerMouseover).off(h.MOUSEOUT+" "+h.BLUR,this._removeTriggerMouseover);
if(this.$overlay){this.$overlay.off(h.MOUSEOVER,this._setTooltipMouseover).off(h.MOUSEOUT,this._removeTooltipMouseover)
}this._detachOpenListeners()
},_detachOpenListeners:function(){k.off(h.KEYDOWN,this._closeIfEscapeKey)
},destroy:function(){this.detachEventListeners();
if(this.$overlay){this.$overlay.remove()
}},_loadCss:function(){return this.loadCss(this._config.cssDependencies)
},open:function(){var G;
if(this._isOpening&&this._isOpening.state()===m){return this._isOpening.promise()
}this._isOpening=G=new e.Deferred();
if(!this.$overlay){this._loadCss().then(this._onFirstOpen).then(this._open).then(G.resolve,G.reject)
}else{this._open().then(G.resolve,G.reject)
}return G.then(b.bind(this._attachOpenListeners,this)).promise()
},_open:function(){var G=new e.Deferred(),H=this;
if(this.isMouseoverTrigger===z){return G.reject(new Error(s.USER_MOUSEOUT)).promise()
}if(!this.showTimer){this.showTimer=b.delay(function(){H._showTooltip().then(G.resolve)
},this._config.delayOpen)
}else{G.reject(new Error(s.TOOLTIP_ALREADY_SHOWING))
}return G.promise()
},_onFirstOpen:function(){var G=this._config;
if(c){G.offsetX=c.flip(G.offsetX,-G.offsetX)
}this.createOverlay();
this.setContent();
this.isCreating=false
},_showTooltip:function(){var H=new e.Deferred(),I=this._config,G=this.$overlay,J=this;
this.currentDirection=I.direction;
G.addClass(w).appendTo(e(A));
this.calculatePosition();
if(I.isFlippable){this._setTooltipStyling(G)
}if(F&&I.doAnimate){G.one(F,function(){H.resolve(J)
})
}else{H.resolve(this)
}return H.promise()
},close:function(){var G=new e.Deferred(),H=this;
if(this.showTimer&&this._isOpening&&this._isOpening.state()===m){clearTimeout(this.showTimer);
this._isOpening.reject(new Error(s.TOOLTIP_CLOSED_BEFORE_FULLY_OPENED))
}b.delay(function(){H._close().then(G.resolve,G.reject)
},this._config.delayClose);
return G.then(this._detachOpenListeners).promise()
},_close:function(){var G=new e.Deferred();
if(!this.isMouseoverTooltip&&!this.isMouseoverTrigger){this._hideTooltip();
G.resolve(this)
}else{G.reject(new Error(s.USER_INTERACTING_TOOLTIP))
}return G.promise()
},_hideTooltip:function(){this.showTimer=null;
if(this.$overlay){this.$overlay.removeClass(w).detach()
}},createOverlay:function(){var G=e("<div/>").attr(p,B.OVERLAY),H=e("<span/>").addClass(B.ARROW);
G.append(H);
this._setTooltipStyling(G);
this.$overlay=G;
this._attachTooltipListeners()
},setContent:function(){var G=e("<div/>").addClass(B.CONTENT),H=this._setContent();
this._addAccessibility(H);
G.append(H);
this.$overlay.prepend(G)
},_setContent:function(){var G=E,H;
if(this._config.tooltipContentID){G=e("#"+this._config.tooltipContentID);
H=G.parent();
if(H.hasClass(B.CONTAINER)&&H.children().length===1){H.remove()
}}return G
},_addAccessibility:function(H){var G=this._$el.attr(u.DESCRIBED_BY),I=H.attr(u.ROLE);
if(b.isUndefined(G)){this._$el.attr(u.DESCRIBED_BY,this._config.tooltipContentID)
}if(b.isUndefined(I)){H.attr(u.ROLE,B.TOOLTIP)
}},_setTooltipStyling:function(H){var I=this._config,K=I.type,L=this.currentDirection||I.direction,G=I.doAnimate,J=[K,"tooltip-"+L];
H.removeClass();
if(I.overlayClasses){J.push(I.overlayClasses)
}H.addClass(J.join(" ")).css({width:I.width});
if(this.showTimer){H.addClass(w)
}if(G){H.addClass(r+" "+v[L.toUpperCase()])
}},_isFlippable:function(G){return this._config.isFlippable&&!G
},_isAboveViewport:function(G){return G<C.scrollTop()
},_isBelowViewport:function(G){return G>(C.height()+C.scrollTop())
},_isLeftOfViewport:function(G){return G<C.scrollLeft()
},_isRightOfViewport:function(G){return G>(C.width()+C.scrollLeft())
},calculatePosition:function(){var M={},H=this._config,L=this._$el.offset(),K=L.top,J=L.left,G=c&&c.flip(y.RIGHT,y.LEFT)||y.RIGHT,I=c&&c.flip(y.LEFT,y.RIGHT)||y.LEFT;
this.currentTop=K;
this.currentLeft=J;
switch(H.direction){case y.BOTTOM:M=this.calculateBottom();
break;
case y.TOP:M=this.calculateTop();
break;
case G:M=this.calculateRight();
break;
case I:M=this.calculateLeft();
break;
default:M=this.calculateBottom()
}this.$overlay.css(M);
return M
},calculateBottom:function(L){var I=this._config,N=this.$overlay,O=this._$el,G,K,H,M,J;
L=L||false;
G=N.outerHeight()+I.offsetExtra;
H=O.outerWidth()/2;
K=(N.outerWidth()/2);
M=this.currentTop-G+I.offsetY;
J=this.currentLeft-K+H+I.offsetX;
if(this._isFlippable(L)&&this._isAboveViewport(M)){this.currentDirection=y.TOP;
return this.calculateTop(true)
}else{return{top:M,left:J}
}},calculateTop:function(M){var J=this._config,O=this.$overlay,P=this._$el,G,L,I,H,N,K;
M=M||false;
G=P.outerHeight()+J.offsetExtra;
I=P.outerWidth()/2;
L=(O.outerWidth()/2);
N=this.currentTop+G+J.offsetY;
K=this.currentLeft-L+I+J.offsetX;
H=N+O.outerHeight();
if(this._isFlippable(M)&&this._isBelowViewport(H)){this.currentDirection=y.BOTTOM;
return this.calculateBottom(true)
}else{return{top:N,left:K}
}},calculateLeft:function(K){var H=this._config,O=this.$overlay,P=this._$el,G,J,L,N,M,I;
K=K||false;
J=P.outerWidth()+H.offsetExtra;
L=P.outerHeight()/2;
G=(O.outerHeight()/2);
M=this.currentTop-G+L+H.offsetY;
I=this.currentLeft+J+H.offsetX;
N=I+O.outerWidth();
if(this._isFlippable(K)&&this._isRightOfViewport(N)){this.currentDirection=y.RIGHT;
return this.calculateRight(true)
}else{return{top:M,left:I}
}},calculateRight:function(K){var H=this._config,N=this.$overlay,O=this._$el,G,J,L,M,I;
K=K||false;
J=N.outerWidth()+H.offsetExtra;
L=O.outerHeight()/2;
G=(N.outerHeight()/2);
M=this.currentTop-G+L+H.offsetY;
I=this.currentLeft-J+H.offsetX;
if(this._isFlippable(K)&&this._isLeftOfViewport(I)){this.currentDirection=y.LEFT;
return this.calculateLeft(true)
}else{return{top:M,left:I}
}}}
});
LIModules.exports("Tooltip",d)
}());$(function(){var d=$("#wrapper");
function c(j){var e=$(j.target),i=e,h="aria-selected",g="true",f="false",l,m,k;
j.preventDefault();
if(e.get(0).tagName==="SPAN"){i=e.parent()
}k=i.attr("id");
if(k!=="contact-info-tab"){$('.profile-actions [role="tab"], .relationship-header [role="tab"]').attr(h,f);
if(i.attr(h)===f){i.attr(h,g)
}else{l=i.text();
if(l==="Relationship"){i=$("#relationship-header-tab");
i.attr(h,g)
}else{i=$("#contacs-tab");
i.attr(h,g)
}}}else{i.attr(h,function(n,o){return o===g?f:g
})
}if(i.attr(h)===g){m="#"+i.attr("aria-controls");
$(m).focus()
}}function a(i){var f=$(i.target),h=f.prev(),e=f.next(),k="card-tab",j=37,g=39;
if(f.hasClass(k)){if(i.which===j){if(h.hasClass(k)){i.preventDefault();
h.focus()
}}else{if(i.which===g){if(e.hasClass(k)){i.preventDefault();
e.focus()
}}}}}function b(f){var e=$(f.target),i=e.closest(".show-more-info"),h=e.closest(".relationship-header"),g=e.closest(".save-to-contacts");
if(i.length){c(f);
return
}if(h.length||g.length){c(f)
}}(function(){d.on("click",b);
d.on("keydown",a)
}())
});